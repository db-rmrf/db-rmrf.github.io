<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>George&#39;Blog</title>
  
  <subtitle>javac Zero-error.java</subtitle>
  <link href="https://bugdev.tk/feed.xml" rel="self"/>
  <link href="https://bugdev.tk/" rel="hub"/>
  <link href="https://bugdev.tk/"/>
  <updated>2022-04-26T06:43:30.728Z</updated>
  <id>https://bugdev.tk/</id>
  
  <author>
    <name>Parker</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>nginx配置反向代理</title>
    <link href="https://bugdev.tk/post/51543/"/>
    <id>https://bugdev.tk/post/51543/</id>
    <published>2022-04-20T05:46:00.000Z</published>
    <updated>2022-04-26T06:43:30.728Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>nginx 的配置文件 /etc/nginx/nginx.conf</p><p><strong>编辑前先backup</strong></p><figure class="highlight awk"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span> 备份配置文件<br>cp nginx.conf nginx.conf.bak<br><br><br><span class="hljs-regexp">//</span> 编辑Nginx配置文件<br>vim <span class="hljs-regexp">/etc/</span>nginx/nginx.conf<br><span class="hljs-regexp">//</span> 在配置文件的http&#123;&#125;中添加如下配置<br>server &#123;<br><span class="hljs-comment"># 端口号</span><br>listen       <span class="hljs-number">80</span>;<br><span class="hljs-comment"># 域名</span><br>server_name  codingme.net;<br><span class="hljs-comment"># web目录</span><br>root /webroot;<br><span class="hljs-comment"># 默认首页</span><br>index index.html<br>error_page   <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span>  /<span class="hljs-number">50</span>x.html;<br>location / &#123;<br>&#125;<br>    &#125;<br></code></pre></td></tr></table></figure><h3 id="配置反向代理"><a href="#配置反向代理" class="headerlink" title="配置反向代理"></a>配置反向代理</h3><p>什么是反向代理呢？<a href="/post/32921/">参考</a></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span> 编辑Nginx配置文件<br>vim <span class="hljs-regexp">/etc/</span>nginx/nginx.conf<br><span class="hljs-regexp">//</span> 在配置文件的http&#123;&#125;中添加如下配置<br> server &#123;<br>        listen       <span class="hljs-number">80</span>;<br>        server_name  codingme.net;<br>        location / &#123;<br><span class="hljs-comment"># Tomcat访问路径</span><br>            proxy_pass http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">8080</span>/;<br>        &#125;<br>        error_page   <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span>  /<span class="hljs-number">50</span>x.html;<br>        location = /<span class="hljs-number">50</span>x.html &#123;<br>            root   html;<br>        &#125;        <br>    &#125;  <br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Linux" scheme="https://bugdev.tk/categories/Linux/"/>
    
    
    <category term="Ops" scheme="https://bugdev.tk/tags/Ops/"/>
    
    <category term="nginx" scheme="https://bugdev.tk/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>nginx的简单使用</title>
    <link href="https://bugdev.tk/post/32921/"/>
    <id>https://bugdev.tk/post/32921/</id>
    <published>2022-04-18T05:04:00.000Z</published>
    <updated>2022-04-26T06:32:31.975Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="Nginx简介和三大功能"><a href="#Nginx简介和三大功能" class="headerlink" title="Nginx简介和三大功能"></a>Nginx简介和三大功能</h1><p>Nginx (engine x)是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP/POP3/SMTP（邮件）服务。Nginx是由伊戈尔·赛索耶夫为俄罗斯访问量第二的Rambler.ru站点（俄文：Pam6Πep）开发的，第一个公开的版本0.1.0发布于2004年6月1日。2011年6月1日，nginx 1.0.4发布。</p><p>其特点是占有内存少，并发能力强，事实上nginx的并发能力在同类型的网页服务器中表现较好，中国大陆使用nginx网站用户有：百度、京东、新浪、网页等。在全球活跃的网站中有12.18%的使用比例，大约为2220万个网站。</p><p>Nginx是一个安装非常简单、配置文件非常简洁（且能支持perl语法）、Bug非常少的服务。Nginx 启动特别容易，并且几乎可以做到7*24不间断运行，即使运行数个月也不需要重新启动。你还能不间断服务的情况下进行软件版本的升级。</p><p>nginx的代码是完全使用C语言开发。官方数据测试表明能够支持高达 50,000 个并发连接数的响应</p><h2 id="正向代理和反向代理"><a href="#正向代理和反向代理" class="headerlink" title="正向代理和反向代理"></a>正向代理和反向代理</h2><p>正向代理：代理客户端</p><p>正向代理类似一个跳板机，代理访问外部资源<br>比如我们国内访问谷歌，直接访问访问不到，我们可以通过一个正向代理服务器，请求发到代理服，代理服务器能够访问谷歌，这样由代理去谷歌取到返回数据，再返回给我们，这样我们就能访问谷歌了</p><ul><li>访问原来无法访问的资源，如google</li><li>可以做缓存，加速访问资源</li><li>对客户端访问授权，上网进行认证</li><li>代理可以记录用户访问记录（上网行为管理），对外隐藏用户信息</li></ul><p>反向代理：代理服务器</p><p>反向代理（Reverse Proxy）实际运行方式是指以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个服务器</p><ul><li>保证内网的安全，阻止web攻击，大型网站，通常将反向代理作为公网访问地址，Web服务器是内网`</li><li>负载均衡，通过反向代理服务器来优化网站的负载</li></ul><h2 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h2><p>权重轮询实现</p><p>Nginx提供的负载均衡策略有两种：内置策略和拓展策略。内置策略为轮询，Ip hash。拓展策略</p><p>iphash 对客户端请求的ip进行hash操作，然后根据hash结果来将同一个客户端的ip请求分发给同一台服务器进行处理，可以解决session不共享的问题。（redis也能实现，也推荐使用redis）</p><h2 id="动静分离"><a href="#动静分离" class="headerlink" title="动静分离"></a>动静分离</h2><p>动静分离，在我们的软件开发中，有一些请求需要后台处理，有些请求不需要经过后台处理的（如：css、html、jsp、js等等文件），这些不需要经过后台处理的文件称之为静态文件。让动态网站里的动态网页根据一定规则把不变的资源和经常变的资源区分开来，动静资源做好了拆分以后，我们就可以根据静态资源的特点将其做缓存操作。提高资源响应的速度。</p><h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><figure class="highlight jboss-cli"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-keyword">cd</span> <span class="hljs-string">/usr/local/nginx/sbin/</span><br><span class="hljs-string">./nginx</span><br><span class="hljs-string">./nginx</span> -s stop<br><span class="hljs-string">./nginx</span> -s <span class="hljs-keyword">quit</span><br><span class="hljs-string">./nginx</span> -s <span class="hljs-keyword">reload</span><br>ps aux|grep nginx 查看进程<br></code></pre></td></tr></table></figure><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>这个就没必要说了。yum，或者官网下载push上去</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="web" scheme="https://bugdev.tk/categories/web/"/>
    
    
    <category term="Ops" scheme="https://bugdev.tk/tags/Ops/"/>
    
  </entry>
  
  <entry>
    <title>Docker的使用</title>
    <link href="https://bugdev.tk/post/50597/"/>
    <id>https://bugdev.tk/post/50597/</id>
    <published>2022-04-10T15:31:00.000Z</published>
    <updated>2022-04-14T12:01:46.861Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="docker是什么"><a href="#docker是什么" class="headerlink" title="docker是什么"></a>docker是什么</h1><p><strong>docker是虚拟化技术的一种</strong></p><p>docker：轻量化的容器技术</p><p>运行机制：基于内核，把运行环境和依赖的库、运行的软件打包成镜像，docker镜像互相独立</p><p>特点：快速交付、部署、节省资源、简单、便捷</p><h2 id="docker的历史"><a href="#docker的历史" class="headerlink" title="docker的历史"></a>docker的历史</h2><p>Docker 最初是 dotCloud 公司创始人 Solomon Hykes 在法国期间发起的一个公司内部项目，它是基于 dotCloud 公司多年云服务技术的一次革新，并于 <a href="https://en.wikipedia.org/wiki/Docker_(software)">2013 年 3 月以 Apache 2.0 授权协议开源</a>，主要项目代码在 <a href="https://github.com/moby/moby">GitHub</a> 上进行维护。Docker 项目后来还加入了 Linux 基金会，并成立推动 <a href="https://www.opencontainers.org/">开放容器联盟（OCI）</a>。</p><p>Docker 自开源后受到广泛的关注和讨论，至今其 GitHub 项目已经超过 4 万 6 千个星标和一万多个 fork。甚至由于 Docker 项目的火爆，在 2013 年底，<a href="https://blog.docker.com/2013/10/dotcloud-is-becoming-docker-inc/">dotCloud 公司决定改名为 Docker</a>。Docker 最初是在 Ubuntu 12.04 上开发实现的；Red Hat 则从 RHEL 6.5 开始对 Docker 进行支持；Google 也在其 PaaS 产品中广泛应用 Docker。</p><p>Docker 使用 Google 公司推出的 <a href="https://golang.org/">Go 语言</a> 进行开发实现，基于 Linux 内核的 <a href="https://zh.wikipedia.org/wiki/Cgroups">cgroup</a>，<a href="https://en.wikipedia.org/wiki/Linux_namespaces">namespace</a>，以及<a href="https://en.wikipedia.org/wiki/Aufs">AUFS</a> 类的 <a href="https://en.wikipedia.org/wiki/Union_mount">Union FS</a> 等技术，对进程进行封装隔离，属于 <a href="https://en.wikipedia.org/wiki/Operating-system-level_virtualization">操作系统层面的虚拟化技术</a>。由于隔离的进程独立于宿主和其它的隔离的进程，因此也称其为容器。最初实现是基于 <a href="https://linuxcontainers.org/lxc/introduction/">LXC</a>，从 0.7 版本以后开始去除 LXC，转而使用自行开发的 <a href="https://github.com/docker/libcontainer">libcontainer</a>，从 1.11 开始，则进一步演进为使用 <a href="https://github.com/opencontainers/runc">runC</a> 和 <a href="https://github.com/containerd/containerd">containerd</a>。</p><h1 id="docker组成"><a href="#docker组成" class="headerlink" title="docker组成"></a>docker组成</h1><p><strong>镜像（lmage）：</strong></p><p>docker镜像就像是一个模板，可以通过这个模板创建容器服务，tomcat镜像run＞tomcat01容器（提供服务器）。通过这个镜可以创建多个容器（最终服务行或者项目运行在容器中）。</p><p><strong>容额（container）：</strong></p><p>Docker利用容器技术，独立返行一个或一个组应用，通过镜像来创建的。启动，停止，删除，基本命令！</p><p>目前可以把容器理解为就一个简易LINUX系统</p><p><strong>仓库（repository）：</strong></p><p>仓理就是存放镜像的地方！</p><p>仓库分为公有仓库和私有仓库！</p><h1 id="docker的底层原理"><a href="#docker的底层原理" class="headerlink" title="docker的底层原理"></a>docker的底层原理</h1><p>Docker是一个Client-Server结构的系统，Docker的守护进程运行在主机上。通过Socket从客户端访问<br>docker server接收到docker-Clent的指令，就会执行指令</p><p><img src="/post/50597/image-20220412180139850.png"></p><p><strong>docker为什么比VM快！</strong></p><p><img src="/post/50597/image-20220412180515290.png"></p><p>Docker有着比虚拟机更少的抽象层</p><p>docker利用宿主机的内核，vm则需要guest os</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="检查"><a href="#检查" class="headerlink" title="检查"></a>检查</h2><p>Docker需要一个64位系统的红帽系统，内核的版本必须大于3.10。可以用下面的命令来检查是否满足docker的要求。</p><figure class="highlight shell"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="language-bash">查看内核版本</span><br><span class="hljs-meta">$ </span><span class="language-bash"><span class="hljs-built_in">uname</span> -r</span> <br>3.10.0-229.el7.x86_64 <br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="language-bash">系统版本</span><br>[root@dockerhost ~]# cat /etc/os-release <br>NAME=&quot;CentOS Linux&quot;<br>VERSION=&quot;7 (Core)&quot;<br>ID=&quot;centos&quot;<br>ID_LIKE=&quot;rhel fedora&quot;<br>VERSION_ID=&quot;7&quot;<br>PRETTY_NAME=&quot;CentOS Linux 7 (Core)&quot;<br>ANSI_COLOR=&quot;0;31&quot;<br>CPE_NAME=&quot;cpe:/o:centos:centos:7&quot;<br>HOME_URL=&quot;https://www.centos.org/&quot;<br>BUG_REPORT_URL=&quot;https://bugs.centos.org/&quot;<br><br>CENTOS_MANTISBT_PROJECT=&quot;CentOS-7&quot;<br>CENTOS_MANTISBT_PROJECT_VERSION=&quot;7&quot;<br>REDHAT_SUPPORT_PRODUCT=&quot;centos&quot;<br>REDHAT_SUPPORT_PRODUCT_VERSION=&quot;7&quot;<br><br></code></pre></td></tr></table></figure><h2 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="language-bash">卸载旧的版本</span><br>sudo yum remove docker \<br>                  docker-client \<br>                  docker-client-latest \<br>                  docker-common \<br>                  docker-latest \<br>                  docker-latest-logrotate \<br>                  docker-logrotate \<br>                  docker-engine <br>                  <br>                  <br><span class="hljs-meta">#</span><span class="language-bash">安装依赖</span>                 <br>sudo yum install -y yum-utils<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="language-bash">设置镜像仓库</span><br>sudo yum-config-manager \<br>    --add-repo \<br>    https://download.docker.com/linux/centos/docker-ce.repo#官方默认为国外源<br><br><br>sudo yum-config-manager \<br>    --add-repo \<br>    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo#阿里云<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="language-bash">更新yum索引</span><br>[root@dockerhost ~]# yum makecache fast<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="language-bash">安装docker相关 （ce是社区版 ee为企业版）</span><br>sudo yum install docker-ce docker-ce-cli containerd.io<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="language-bash">启动</span><br>sudo systemctl start docker<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="language-bash">验证</span><br>sudo docker run hello-world<br>[root@dockerhost ~]# docker version <br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="language-bash">查看下载镜像</span><br>[root@dockerhost ~]# docker images <br>REPOSITORY    TAG       IMAGE ID       CREATED        SIZE<br>hello-world   latest    feb5d9fea6a5   6 months ago   13.3kB<br></code></pre></td></tr></table></figure><h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><h3 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker version #版本<br>docker --help #帮助<br>docker info #显示docker详细信息<br></code></pre></td></tr></table></figure><h2 id="镜像命令"><a href="#镜像命令" class="headerlink" title="镜像命令"></a>镜像命令</h2><h3 id="docker-images-查看本地镜像"><a href="#docker-images-查看本地镜像" class="headerlink" title="docker images    查看本地镜像"></a><strong>docker images    查看本地镜像</strong></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@dockerhost ~]# docker images <br>REPOSITORY    TAG       IMAGE ID       CREATED        SIZE<br>hello-world   latest    feb5d9fea6a5   6 months ago   13.3kB<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="language-bash">解释</span><br>REPOSLORY镜像的仓库源<br>TAG镜像的标等<br>IMAGE ID镜像id<br>CREATED创建时间<br>SIZE大小<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="language-bash">可选项</span><br>-a，--all#列出所有镜像<br>-q，--quiet#列出镜像id<br></code></pre></td></tr></table></figure><p><strong>docker search 查找</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@dockerhost ~]# docker search busybox<br>NAME                                DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED<br>busybox                             Busybox base image.                             2569      [OK]       <br>radial/busyboxplus                  Full-chain, Internet enabled, busybox made f…   48                   [OK]<br>                 <br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="language-bash">可选项</span><br>Usage:  docker search [OPTIONS] TERM<br><br>Search the Docker Hub for images<br><br>Options:<br>  -f, --filter filter   Filter output based on conditions provided<br>      --format string   Pretty-print search using a Go template<br>      --limit int       Max number of search results (default 25)<br>      --no-trunc        Don&#x27;t truncate output<br></code></pre></td></tr></table></figure><h3 id="docker-pull-拉取"><a href="#docker-pull-拉取" class="headerlink" title="docker pull 拉取"></a><strong>docker pull 拉取</strong></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker pull [OPTIONS] NAME[:TAG|@DIGEST]<br></code></pre></td></tr></table></figure><h3 id="docker-rmi-删除"><a href="#docker-rmi-删除" class="headerlink" title="docker rmi 删除"></a><strong>docker rmi 删除</strong></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sh">[root@dockerhost ~]<span class="hljs-comment"># docker rmi -f 容器id #删除指定容器</span><br>[root@dockerhost ~]<span class="hljs-comment"># docker rmi -f 容器id  容器id 容器id #删除多个</span><br>[root@dockerhost ~]<span class="hljs-comment"># docker rmi -f $(docker images -aq) #删除全部</span><br></code></pre></td></tr></table></figure><h2 id="容器命令"><a href="#容器命令" class="headerlink" title="容器命令"></a>容器命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker pull centos<br></code></pre></td></tr></table></figure><p><strong>创建容器</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run [OPTIONS] IMAGE [COMMAND] [ARG...]<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="language-bash">参数</span><br>--nanme=&quot;name&quot;容器名，区别容器<br>-d后台方式运行<br>-it交互方式运行进入容器查看内容<br>-p指定容器端口 -p 8080<br>-pip:主机端口:容器端口<br>-p主机端口:容器端口<br>-p容器端口<br>-p随机指定端口<br><span class="hljs-meta"></span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="language-bash">创建容器并启动</span><br>[root@dockerhost ~]# docker run --name docker-cent -it centos /bin/bash<br>[root@90841170aaad /]# ls     <br>bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var<br></code></pre></td></tr></table></figure><h3 id="退出容器"><a href="#退出容器" class="headerlink" title="退出容器"></a><strong>退出容器</strong></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="language-bash">退出</span><br>[root@90841170aaad /]# exit#停止容器并退出<br>ctrl + P + Q#不停止退出<br></code></pre></td></tr></table></figure><h3 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a><strong>删除容器</strong></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">doncker rm 容器id   #删除指定容器，不能删除运行状态容器<br>docker rm -f $(docker ps -aq)#删除所有<br>docker ps -a -q|xargs docker rm#删除所有<br></code></pre></td></tr></table></figure><h3 id="启动和停止"><a href="#启动和停止" class="headerlink" title="启动和停止"></a><strong>启动和停止</strong></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker start 容器<span class="hljs-built_in">id</span><span class="hljs-comment">#启动</span><br>docker restart 容器<span class="hljs-built_in">id</span><span class="hljs-comment">#重启</span><br>docker stop 容器<span class="hljs-built_in">id</span><span class="hljs-comment">#停止</span><br>docker <span class="hljs-built_in">kill</span> 容器<span class="hljs-built_in">id</span><span class="hljs-comment">#强制杀进程</span><br></code></pre></td></tr></table></figure><h1 id="常用其它命令"><a href="#常用其它命令" class="headerlink" title="常用其它命令"></a>常用其它命令</h1><h3 id="后台运行"><a href="#后台运行" class="headerlink" title="后台运行"></a><strong>后台运行</strong></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker run -d 镜像<br><span class="hljs-comment">#注意，后台运行容器时，容器必须有前台服务进程，否则会被kill</span><br></code></pre></td></tr></table></figure><h3 id="查看logs"><a href="#查看logs" class="headerlink" title="查看logs"></a><strong>查看logs</strong></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker logs [OPTIONS] CONTAINER<br><br><span class="hljs-comment">#参数:</span><br>      --details        Show extra details provided to logs<br>  -f, --follow         Follow <span class="hljs-built_in">log</span> output<br>      --since string   Show logs since timestamp (e.g. 2013-01-02T13:23:37Z) or relative (e.g. 42m <span class="hljs-keyword">for</span> 42 minutes)<br>  -n, --<span class="hljs-built_in">tail</span> string    Number of lines to show from the end of the logs (default <span class="hljs-string">&quot;all&quot;</span>)<br>  -t, --timestamps     Show timestamps<br>      --until string   Show logs before a timestamp (e.g. 2013-01-02T13:23:37Z) or relative (e.g. 42m <span class="hljs-keyword">for</span> 42 minutes)<br></code></pre></td></tr></table></figure><h3 id="查看进程id"><a href="#查看进程id" class="headerlink" title="查看进程id"></a><strong>查看进程id</strong></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker top 容器<span class="hljs-built_in">id</span><br></code></pre></td></tr></table></figure><h3 id="查看元数据"><a href="#查看元数据" class="headerlink" title="查看元数据"></a><strong>查看元数据</strong></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker inspect [OPTIONS] NAME|ID [NAME|ID...]<br><br>Options:<br>  -f, --format string   Format the output using the given Go template<br>  -s, --size            Display total file sizes <span class="hljs-keyword">if</span> the <span class="hljs-built_in">type</span> is container<br>      --<span class="hljs-built_in">type</span> string     Return JSON <span class="hljs-keyword">for</span> specified <span class="hljs-built_in">type</span><br></code></pre></td></tr></table></figure><h3 id="进入正在运行的容器"><a href="#进入正在运行的容器" class="headerlink" title="进入正在运行的容器"></a><strong>进入正在运行的容器</strong></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">#1.交互模式进入容器开启新的bashshell</span><br>docker <span class="hljs-built_in">exec</span> -it 容器<span class="hljs-built_in">id</span> bashshell<br><br><span class="hljs-comment">#2.进入容器当前shell</span><br>docker attach 容器<span class="hljs-built_in">id</span>  <br></code></pre></td></tr></table></figure><h3 id="从容器内copy到主机"><a href="#从容器内copy到主机" class="headerlink" title="从容器内copy到主机"></a><strong>从容器内copy到主机</strong></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker <span class="hljs-built_in">cp</span> 容器<span class="hljs-built_in">id</span>:容器路径 主机路径<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Linux" scheme="https://bugdev.tk/categories/Linux/"/>
    
    
    <category term="docker" scheme="https://bugdev.tk/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>docker报错Error response from daemon: driver failed programming external connectivity on endpoint</title>
    <link href="https://bugdev.tk/post/47716/"/>
    <id>https://bugdev.tk/post/47716/</id>
    <published>2022-04-09T11:52:00.000Z</published>
    <updated>2022-04-14T11:58:40.667Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><strong>报错提示：</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><pre><code class="hljs shell">[root@localhost ~]# docker run -d -p 3344:80 centos:httpd /bin/sh -c /usr/local/bin/start.sh<br>d5b2bd5a7bc4895a973fe61efd051847047d26385f65c278aaa09e4fa31c4d76<br>docker: Error response from daemon: driver failed programming external connectivity on endpoint quirky_allen (6bda693d1143657e46bee0300276aa05820da2b21a3d89441e820d1a274c48b6): (iptables failed: iptables --wait -t nat -A DOCKER -p tcp -d 0/0 --dport 3344 -j DNAT --to-destinatio<br></code></pre></td></tr></table></figure><p><strong>原因</strong></p><p>docker服务启动时定义的自定义链DOCKER由于firewall 被清掉</p><p>firewall的底层是使用iptables进行数据过滤，建立在iptables之上，这可能会与 Docker 产生冲突。</p><p>docker容器的底层原理决定在启动docker的时候会在iptables中注册一个链，通过防火墙的链也可以找到其注册的信息，主要注册这些链，是docker中的容器为了暴露端口而使用的</p><p>这时当 <code>firewalld</code> 启动或者重启的时候，将会从 iptables 中移除 <code>DOCKER</code> 的规则，从而影响了 Docker 的正常工作</p><p><strong>解决</strong></p><p>重启docker容器即可解决该问题</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl restart docker<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Linux" scheme="https://bugdev.tk/categories/Linux/"/>
    
    
    <category term="docker" scheme="https://bugdev.tk/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>简单的家庭局域网虚拟组网方式（zerotier）</title>
    <link href="https://bugdev.tk/post/42068/"/>
    <id>https://bugdev.tk/post/42068/</id>
    <published>2022-04-03T05:49:00.000Z</published>
    <updated>2022-04-21T06:15:00.931Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>这里引述一下什么是zerotier？</p><p>来自官网的一段：ZeroTier is a smart Ethernet switch for planet Earth.</p><p>It’s a distributed network hypervisor built atop a cryptographically secure global peer to peer network. It provides advanced network virtualization and management capabilities on par with an enterprise SDN switch, but across both local and wide area networks and connecting almost any kind of app or device.</p><p>This manual describes the design and operation of ZeroTier and its associated services, apps, and libraries. Its intended audience includes IT professionals, network administrators, information security experts, and developers.</p><p>The first section (2) of this guide explains ZeroTier’s design and operation at a high level and is written for those with at least an intermediate knowledge of topics like TCP/IP and Ethernet networking. It’s not required reading for most users, but understanding how things work in detail helps clarify everything else and helps tremendously with troubleshooting should anything go wrong.</p><p>The remaining sections deal more concretely with deployment and administration.</p><h2 id="Software-Defined-Network"><a href="#Software-Defined-Network" class="headerlink" title="Software Defined Network"></a>Software Defined Network</h2><p>这里牵扯到SDN的概念：SDN字面意思是<strong>软件定义网络</strong>，其试图摆脱硬件对网络架构的限制，这样便可以像升级、安装软件一样对网络进行修改，便于更多的APP（应用程序）能够快速部署到网络上。</p><p>如果把现有的网络看成手机，那SDN的目标就是做出一个网络界的Android系统，可以在手机上安装升级，同时还能安装更多更强大的手机APP。</p><p>过去30年里，IP网络一直是全分布式的，战功卓著，解决了各种客户需求，今天SDN是为了未来更好更快的实现用户需求。并不是有什么需求通过传统方法不能做到，只是SDN做得更快、更好、更简单。</p><p>SDN的本质是网络软件化，提升网络可编程能力，是一次网络架构的重构，而不是一种新特性、新功能。SDN将比原来网络架构更好、更快、更简单的实现各种功能特性。</p><p>简单来说zerotier就是一个sdn工具，它的底层基于<strong>udp传输</strong>，如果是对于有时延有要求的小型企业，这里应该首先选择思科或华为的<strong>企业级SDN</strong>方案去部署，甚至直接选择<strong>专线</strong>为基础去组建局域网。</p><p>当然我们是<strong>家庭局域网</strong>，对于国内的<strong>qos限速</strong>这里我们不去考虑（qos限速：一般来说运营商处理庞大的跨境数据时，会进行网络排序，对普通用户而言，一般的udp流量排名优先级很低，在实际过程中表现为时延高、转发速度慢，甚至有可能被丢包），而且普通用户不太可能用的跨境组网，对于一般国内的网络资源来说，速度其实不会很低。</p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>因为具体情况不一，这里不贴详细配置，附上一个参考的，<a href="https://post.smzdm.com/p/apxkx2m7/">参考配置</a></p><p>简单来说就是对于普通用户只需要将软路由等设备作为zerotier的子网网关，通过nat网络进行代理服务</p><p>考虑到官网服务的在中国大陆的特殊性，部署私有根节点的解决方案也在上面有提及</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Network" scheme="https://bugdev.tk/categories/Network/"/>
    
    
    <category term="Network" scheme="https://bugdev.tk/tags/Network/"/>
    
  </entry>
  
  <entry>
    <title>network project</title>
    <link href="https://bugdev.tk/post/39856/"/>
    <id>https://bugdev.tk/post/39856/</id>
    <published>2022-04-02T16:52:00.000Z</published>
    <updated>2022-04-06T16:56:18.867Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉，您输入的密码错误，请检查后重新输入。" data-whm="抱歉, 当前文章不能被校验, 不过您还是可以看看解密后的内容。">  <script id="hbeData" type="hbeData" data-hmacdigest="ab59e1b0dcb612de2ce1c7338d9de0f235c116b29b0d00070e3ef3150deb6daf">fd8d1bf829fa52bdbab6091ca2743008d5f39dd7f181b164c120e0a02513072a340b83c41d8452a9ad703ca4dcacada86d604bde2dd1b35476eb4e4e0cc27847e659166620161694538c10a0a0793827e7acc9e0844460ca6ae3a36eec31ee35ce6c5dfce7f88efb22dfbc708191c648ae8e760552855553adf97d9fc31b9680ab1a315edba8c6d37da25fc55a294f4ff9a15b72ba0e2ecd5b878a4421063ad2f9c1d2e96e31706ded786b1db8dec05d4b7da754dfd94e10a1c251caa664dcf01e1357c0f3efc25f2ca7c43c8a3a334b5ad339d2bd7b0e53fad5b88f6e339c5405a4c7a0a576ec1f47e505a20298be0207f28d04b70176a3362ae49f90abb52d2343c6e4dc4b6f4bd8be2acb015ddb97c32576a3ecd6b68f77cfae0400b7e594aa9a727be7fd2aec76cf48a6e6a3483a9bcc6a231f8855127be811857a063c10f6f8588dd071f7c333b96f8f41c818c0639d68bb08092ec2b3bbf9c352536de72caf63db357eba85c051b55dc60e3c9d</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">当前文章暂不对外可见，请输入密码后查看！</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">这是一篇加密文章，需要密码才能继续阅读。</summary>
    
    
    
    <category term="Network" scheme="https://bugdev.tk/categories/Network/"/>
    
    
    <category term="Private" scheme="https://bugdev.tk/tags/Private/"/>
    
    <category term="project" scheme="https://bugdev.tk/tags/project/"/>
    
  </entry>
  
  <entry>
    <title>servelet实现</title>
    <link href="https://bugdev.tk/post/32235/"/>
    <id>https://bugdev.tk/post/32235/</id>
    <published>2022-03-29T11:37:00.000Z</published>
    <updated>2022-04-25T11:47:20.939Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="实现Servlet规范，"><a href="#实现Servlet规范，" class="headerlink" title="实现Servlet规范，"></a>实现Servlet规范，</h1><p>即继承HttpServlet类</p><figure class="highlight java"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xxxx.servelet;<br><br><span class="hljs-keyword">import</span> java.servelet.http.HttpServelet;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Servlet01</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServelet</span>&#123;&#125;<br></code></pre></td></tr></table></figure><h2 id="重写service方法"><a href="#重写service方法" class="headerlink" title="重写service方法"></a>重写service方法</h2><p><img src="/post/32235/Servlet02.jpg"></p><h3 id="Servlet的其他实现方式"><a href="#Servlet的其他实现方式" class="headerlink" title="Servlet的其他实现方式"></a>Servlet的其他实现方式</h3><ul><li><p>继承GennerServlet类</p></li><li><p>实现Servlet类</p><p>重写doget方法</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="java" scheme="https://bugdev.tk/categories/java/"/>
    
    
    <category term="java" scheme="https://bugdev.tk/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>HCIA速通-网络工程师-9-企业网络架构4</title>
    <link href="https://bugdev.tk/post/22316/"/>
    <id>https://bugdev.tk/post/22316/</id>
    <published>2022-03-25T12:18:00.000Z</published>
    <updated>2022-04-06T11:29:01.824Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="IPsec-VPN"><a href="#IPsec-VPN" class="headerlink" title="IPsec VPN"></a>IPsec VPN</h1><p><img src="/post/22316/image-20220331202106621.png"></p><h2 id="IPsec架构"><a href="#IPsec架构" class="headerlink" title="IPsec架构"></a>IPsec架构</h2><p><img src="/post/22316/image-20220331225543923.png"></p><ul><li>IPsec不是一个单纯的协议，它通过AH和ESP两个安全协议实现IP数据报的安全传输</li><li>IKE协议提供密钥协商，建立和维护安全联盟SA等服务</li></ul><h3 id="安全联盟SA"><a href="#安全联盟SA" class="headerlink" title="安全联盟SA"></a>安全联盟SA</h3><p><img src="/post/22316/image-20220331225923209.png"></p><ul><li>安全联盟定了iPSec对等体间将使用的数据封装模式、认证和加密算法、密钥等参数</li><li>安全联盟是单向的、两个对等体之间的双向通信，至少需要两个SA</li></ul><h3 id="传输模式"><a href="#传输模式" class="headerlink" title="传输模式"></a>传输模式</h3><p><img src="/post/22316/image-20220403174742404.png"></p><ul><li>在传输模式下，AH或ESP报头位于IP报头与传输层报头之间</li></ul><h3 id="隧道模式"><a href="#隧道模式" class="headerlink" title="隧道模式"></a>隧道模式</h3><p><img src="/post/22316/image-20220403175142770.png"></p><p>生成另外一个新的IP报头，并封装在AH或ESP之间</p><h3 id="配置步骤"><a href="#配置步骤" class="headerlink" title="配置步骤"></a>配置步骤</h3><p><img src="/post/22316/image-20220403175915247.png"></p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p><img src="/post/22316/image-20220403180003825.png"></p><h3 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h3><p><img src="/post/22316/image-20220403180312128.png"></p><ul><li>对等体安全提议参数须一致</li></ul><p><img src="/post/22316/image-20220403180225727.png"></p><p><img src="/post/22316/image-20220403180451360.png"></p><h1 id="GRE"><a href="#GRE" class="headerlink" title="GRE"></a>GRE</h1><p><img src="/post/22316/image-20220406191352546.png"></p><p><img src="/post/22316/image-20220406191629025.png"></p><p><img src="/post/22316/image-20220406191701948.png"></p><p><img src="/post/22316/image-20220406191739831.png"></p><h1 id="SNMP"><a href="#SNMP" class="headerlink" title="SNMP"></a>SNMP</h1><p><img src="/post/22316/image-20220406192614712.png"></p><h1 id="Esight"><a href="#Esight" class="headerlink" title="Esight"></a>Esight</h1><p>。。。。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Network" scheme="https://bugdev.tk/categories/Network/"/>
    
    
    <category term="Network" scheme="https://bugdev.tk/tags/Network/"/>
    
  </entry>
  
  <entry>
    <title>HCIA速通-网络工程师-8-企业网络架构3</title>
    <link href="https://bugdev.tk/post/17533/"/>
    <id>https://bugdev.tk/post/17533/</id>
    <published>2022-03-20T14:36:00.000Z</published>
    <updated>2022-04-06T11:28:49.675Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h1><p><img src="/post/17533/image-20220329223732932.png"></p><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><h3 id="静态nat"><a href="#静态nat" class="headerlink" title="静态nat"></a>静态nat<img src="/post/17533/image-20220329224028593.png"></h3><ul><li><strong>私有地址和公有地址一对一映射</strong></li><li><strong>一个公网ip只分配给唯一且固定的内网主机</strong></li></ul><h3 id="动态nat"><a href="#动态nat" class="headerlink" title="动态nat"></a>动态nat</h3><p><img src="/post/17533/image-20220329224207108.png"></p><ul><li><strong>基于地址池实现地址转换</strong></li></ul><h3 id="napt"><a href="#napt" class="headerlink" title="napt"></a>napt</h3><p><img src="/post/17533/image-20220329224420934.png"></p><ul><li><strong>网络地址端口转换napt允许多个内部地址映射成同一公有地址的不同端口</strong></li></ul><h3 id="esay-ip"><a href="#esay-ip" class="headerlink" title="esay ip"></a>esay ip</h3><p><img src="/post/17533/image-20220329224608792.png"></p><ul><li><strong>允许将多个内部地址映射到网关出接口地址上的不同端口</strong></li></ul><h3 id="nat服务器"><a href="#nat服务器" class="headerlink" title="nat服务器"></a>nat服务器</h3><p><img src="/post/17533/image-20220329224802984.png"></p><ul><li><strong>通过配置nat服务器，可以使外网用户访问内网服务器</strong></li></ul><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="静态nat-1"><a href="#静态nat-1" class="headerlink" title="静态nat"></a>静态nat</h3><p><img src="/post/17533/image-20220329225153324.png"></p><h4 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h4><p><img src="/post/17533/image-20220329225240459.png"></p><h3 id="动态nat-1"><a href="#动态nat-1" class="headerlink" title="动态nat"></a>动态nat</h3><p><img src="/post/17533/image-20220329225303691.png"></p><p>acl表示允许作nat的地址</p><h4 id="验证-1"><a href="#验证-1" class="headerlink" title="验证"></a>验证</h4><p><img src="/post/17533/image-20220329225411561.png"></p><h3 id="napt-1"><a href="#napt-1" class="headerlink" title="napt"></a>napt</h3><p><img src="/post/17533/image-20220329225303691.png"></p><p><strong>注意</strong>：<strong>no-pat参数不要输入</strong></p><h3 id="esay-ip-1"><a href="#esay-ip-1" class="headerlink" title="esay ip"></a>esay ip</h3><p><img src="/post/17533/image-20220329225702848.png"></p><h4 id="验证-2"><a href="#验证-2" class="headerlink" title="验证"></a>验证</h4><p><img src="/post/17533/image-20220329225949378.png"></p><h3 id="nat-server"><a href="#nat-server" class="headerlink" title="nat server"></a>nat server</h3><p><img src="/post/17533/image-20220329230017281.png"></p><h1 id="WWAN"><a href="#WWAN" class="headerlink" title="WWAN"></a>WWAN</h1><p><img src="/post/17533/image-20220331194225599.png"></p><p>配置</p><p><img src="/post/17533/image-20220331194739103.png"></p><p>ppoe<img src="/post/17533/image-20220331194803731.png"></p><p>配置nat角色<img src="/post/17533/image-20220331194840256.png"></p><h1 id="访问控制列表"><a href="#访问控制列表" class="headerlink" title="访问控制列表"></a>访问控制列表</h1><p><img src="/post/17533/image-20220331195031730.png"></p><h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><p><img src="/post/17533/image-20220331195514408.png"></p><h2 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h2><h4 id="基本"><a href="#基本" class="headerlink" title="基本"></a>基本<img src="/post/17533/image-20220331195717243.png"></h4><h4 id="高级"><a href="#高级" class="headerlink" title="高级"></a>高级</h4><p><img src="/post/17533/image-20220331195806483.png"></p><h1 id="AAA"><a href="#AAA" class="headerlink" title="AAA"></a>AAA</h1><p><img src="/post/17533/image-20220331200402469.png"></p><p><img src="/post/17533/image-20220331200836967.png"></p><p><img src="/post/17533/image-20220331201103593.png"></p><p><img src="/post/17533/image-20220331201120889.png"></p><p><img src="/post/17533/image-20220331201139759.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Network" scheme="https://bugdev.tk/categories/Network/"/>
    
    
    <category term="Network" scheme="https://bugdev.tk/tags/Network/"/>
    
  </entry>
  
  <entry>
    <title>HCIA速通-网络工程师-7-企业网络架构2</title>
    <link href="https://bugdev.tk/post/31555/"/>
    <id>https://bugdev.tk/post/31555/</id>
    <published>2022-03-17T12:18:00.000Z</published>
    <updated>2022-03-29T13:21:33.231Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><strong>特辑专属BGM-Hacknet原声集</strong></p>    <div id="aplayer-GPEdRNpa" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="8058662392" data-server="tencent" data-type="playlist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="140px" data-preload="auto" data-theme="#555"></div> <h1 id="HDLC"><a href="#HDLC" class="headerlink" title="HDLC"></a>HDLC</h1><p><img src="/post/31555/image-20220328201940419.png"></p><p>串行链路传输方式</p><p>HDLC帧格式</p><p><img src="/post/31555/image-20220328204651361.png"></p><ul><li>信息帧、监控帧、无编号帧</li></ul><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p><img src="/post/31555/image-20220328204757358.png"></p><h2 id="HDLC接口地址借用"><a href="#HDLC接口地址借用" class="headerlink" title="HDLC接口地址借用"></a>HDLC接口地址借用</h2><p><img src="/post/31555/image-20220328204834838.png"></p><h1 id="PPP"><a href="#PPP" class="headerlink" title="PPP"></a>PPP</h1><p>PPP协议是一种在串行链路上传输IP数据包的一种方法，是一个协议的集合，不是单一的协议，支持建立链路的链路控制协议LCP以及一系列的NCP 0x0021时，数据部分是IP数据报。 0xC021时,数据部分是LCP数据（链路控制协议）</p><h2 id="PPP组件"><a href="#PPP组件" class="headerlink" title="PPP组件"></a>PPP组件</h2><p><img src="/post/31555/image-20220328205145932.png"></p><h2 id="PPP链路建立过程"><a href="#PPP链路建立过程" class="headerlink" title="PPP链路建立过程"></a>PPP链路建立过程</h2><p><img src="/post/31555/image-20220328205215587.png"></p><h2 id="PPP帧格式"><a href="#PPP帧格式" class="headerlink" title="PPP帧格式"></a>PPP帧格式</h2><p><img src="/post/31555/image-20220328205323131.png"></p><h2 id="LCP报文"><a href="#LCP报文" class="headerlink" title="LCP报文"></a>LCP报文</h2><p><img src="/post/31555/image-20220328205348562.png"></p><h3 id="协商参数"><a href="#协商参数" class="headerlink" title="协商参数"></a>协商参数</h3><p><img src="/post/31555/image-20220328205421988.png"></p><h2 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h2><p><img src="/post/31555/image-20220328205640691.png"></p><h2 id="认证"><a href="#认证" class="headerlink" title="认证"></a>认证</h2><h3 id="PAP"><a href="#PAP" class="headerlink" title="PAP"></a>PAP</h3><p>①PAP提供了一种简单的方法让对端使用2次握手来建立自己的身份，这个仅在初始连接建立时完成。<br> ②连接建立后，被认证者反复向认证者发送一对用户名和密码，直到认证被确认或连接中断。<br> ③安全性不高，密码在链路上明文传输，没有重放、反复尝试、错误攻击的保护。</p><p><img src="/post/31555/image-20220328210229044.png"></p><figure class="highlight awk"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>RTA配置<br>&lt;Huawei&gt;system-view<br><span class="hljs-regexp">//</span>进入aaa<br>[Huawei]AAA<br><span class="hljs-regexp">//</span>配置用户pppau的密码为paptext<br>[Huawei-aaa]local-user pppau password cipher paptext<br><span class="hljs-regexp">//</span>配置用户的服务类型为ppp<br>[Huawei-aaa]local-user pppau service-type ppp<br><span class="hljs-regexp">//</span>进入接口<br>[Huawei]interface Serial <span class="hljs-number">1</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span><br><span class="hljs-regexp">//</span>配置端口协议<br>[Huawei-Serial1<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]link-protocol ppp <br><span class="hljs-regexp">//</span>配置ppp认证方式和密码<br>[Huawei-Serial1<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]ppp authentication-mode pap <br>password simple paptext<br><span class="hljs-regexp">//</span>配置ip地址<br>[Huawei-Serial1<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]ip address <span class="hljs-number">10.1</span>.<span class="hljs-number">1.1</span> <span class="hljs-number">30</span><br><br><span class="hljs-regexp">//</span>RTB配置<br>[Huawei]interface Serial <span class="hljs-number">1</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span><br><span class="hljs-regexp">//</span>配置协议<br>[Huawei-Serial1<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]link-protocol ppp <br><span class="hljs-regexp">//</span>配置用户和密码<br>[Huawei-Serial1<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]ppp pap local-user pppau password simple paptext<br><span class="hljs-regexp">//</span>配置ip<br>[Huawei-Serial1<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]ip address <span class="hljs-number">10.1</span>.<span class="hljs-number">1.2</span> <span class="hljs-number">30</span><br></code></pre></td></tr></table></figure><h4 id="抓包"><a href="#抓包" class="headerlink" title="抓包"></a>抓包</h4><p><img src="/post/31555/image-20220329201208048.png"></p><h3 id="CHAP"><a href="#CHAP" class="headerlink" title="CHAP"></a>CHAP</h3><p>①chap使用3次握手周期性验证对端的身份，这是在链路建立的开始就完成的，在链路建立完成后的任何时间都可以重复发送再验证。<br>②链路阶段建立完成后，认证者发送一个“质询”给被认证者，被认证者通过一次HASH计算（质询+密码）生成的值发送给认证者，认证者把自己hash出来的值与此对比，如果一致，则接受，否则拒接。<br>③两端才知道密码，而且密码不会在链路上传输。</p><p><img src="/post/31555/image-20220328210309572.png"></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>配置用户pppau的密码为chap<br>[Huawei-aaa]local-user pppau password cipher chap<br>Info: Add a new user.<br><span class="hljs-regexp">//</span>配置用户的服务类型为ppp<br>[Huawei-aaa]local-user pppau service-type ppp <br>[Huawei]interface Serial <span class="hljs-number">1</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span><br>[Huawei-Serial1<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]link-protocol ppp <br>[Huawei-Serial1<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]ppp authentication-mode chap <br><span class="hljs-regexp">//</span>配置chap的用户为pppau<br>[Huawei-Serial1<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]ppp chap user pppau<br><span class="hljs-regexp">//</span>添加ip<br>[Huawei-Serial1<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]ip address <span class="hljs-number">10.1</span>.<span class="hljs-number">1.1</span> <span class="hljs-number">30</span><br><br>RTB配置<br>aaa<br><span class="hljs-regexp">//</span>注意<br> local-user chap password cipher nzNG<span class="hljs-string">&#x27;RXtq&#x27;</span><span class="hljs-number">939</span>O4.`(ZGYrz<span class="hljs-comment">#</span><br> local-user chap service-type ppp<br><span class="hljs-comment">#</span><br>interface Serial0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span><br> link-protocol ppp<br> ppp chap user chap<br> ip address <span class="hljs-number">12.1</span>.<span class="hljs-number">1.2</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.252</span><br><span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><h1 id="帧中继"><a href="#帧中继" class="headerlink" title="帧中继"></a>帧中继</h1><p><a href="https://blog.csdn.net/qq_43482132/article/details/97108002">https://blog.csdn.net/qq_43482132/article/details/97108002</a></p><h1 id="PPPOE"><a href="#PPPOE" class="headerlink" title="PPPOE"></a>PPPOE</h1><p><img src="/post/31555/image-20220329204649123.png"></p><h2 id="报文格式"><a href="#报文格式" class="headerlink" title="报文格式"></a>报文格式</h2><p><img src="/post/31555/image-20220329205330630.png"></p><ul><li>以Ethernet格式封装</li></ul><h2 id="会话过程"><a href="#会话过程" class="headerlink" title="会话过程"></a>会话过程</h2><p><img src="/post/31555/image-20220329205429849.png"></p><h2 id="报文类型"><a href="#报文类型" class="headerlink" title="报文类型"></a>报文类型</h2><p><img src="/post/31555/image-20220329205615511.png"></p><h2 id="client配置"><a href="#client配置" class="headerlink" title="client配置"></a>client配置</h2><p><img src="/post/31555/image-20220329205752056.png"></p><p>dialer接口限制断开</p><p><img src="/post/31555/image-20220329205911713.png"></p><h2 id="server配置"><a href="#server配置" class="headerlink" title="server配置"></a>server配置</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs awk">[Huawei]sysname pppoe server<br><span class="hljs-regexp">//</span>新建ip池<br>[pppoe server]ip pool pppoe<br><span class="hljs-regexp">//</span>配置IP池地址<br>[pppoe server-ip-pool-pppoe]network <span class="hljs-number">10.1</span>.<span class="hljs-number">12.0</span> mask <span class="hljs-number">24</span><br><span class="hljs-regexp">//</span>创建虚拟接口<br>[pppoe server]interface Virtual-Template <span class="hljs-number">1</span><br><span class="hljs-regexp">//</span>配置虚拟接口地址<br>[pppoe server-Virtual-Template1]ip address <span class="hljs-number">10.1</span>.<span class="hljs-number">12.2</span> <span class="hljs-number">24</span><br><span class="hljs-regexp">//</span>配置ppp认证方式<br>[pppoe server-Virtual-Template1]ppp authentication-mode chap <br><span class="hljs-regexp">//</span>配置绑定地址池<br>[pppoe server-Virtual-Template1]remote address pool pppoe<br><span class="hljs-regexp">//</span>进入接口<br>[pppoe server]interface GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span><br><span class="hljs-regexp">//</span>绑定虚拟接口<br>[pppoe server-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]pppoe-server bind virtual-template <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Network" scheme="https://bugdev.tk/categories/Network/"/>
    
    
    <category term="Network" scheme="https://bugdev.tk/tags/Network/"/>
    
  </entry>
  
  <entry>
    <title>eNSP的AR路由器启动失败问题</title>
    <link href="https://bugdev.tk/post/24714/"/>
    <id>https://bugdev.tk/post/24714/</id>
    <published>2022-03-16T13:38:00.000Z</published>
    <updated>2022-03-29T10:48:41.516Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><strong>我的系统版本：win11</strong></p><p><strong>ensp版本是 : v100r003c00spc100</strong></p><h1 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h1><p>今天打开电脑出现了ar设备不能启动的问题，具体症状为ar设备启动失败，无限循环#启动中，交换机启动正常。</p><p><img src="/post/24714/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2RvdWJsZWRTUw==,size_16,color_FFFFFF,t_70.png"></p><p>随机Search了一下网页，大致解决方案都是防火墙未允许ensp通过，但是我的防火墙是允许了ensp通过的<img src="/post/24714/image-20220329181051666.png" alt="image-20220329181051666"></p><p>于是以为防火墙出问题了，又把防火墙关闭了，依旧重复该问题。</p><p>还有一种方法是在virtualbox全局里的IP地址配置需要正确，我看了一下发现是正确的。<img src="/post/24714/image-20220329181241501.png" alt="image-20220329181241501"></p><p>看到官网要求虚拟机版本要求是5.0~5.2，想着重装一下虚拟机能不能解决（原版本是：5.2.44-139111），</p><p><img src="/post/24714/image-20220328214001943.png">找了几个5.2以下版本均不兼容win11，无奈重新装回原版本，好歹原来还能打开，又打开ensp重新注册设备，无果，又重新注册，这次我注意到一行小字<img src="/post/24714/image-20220329182119817.png"></p><p><strong>删除设备</strong>，可是在哪里删呢？一番查找，我打开了虚拟机。</p><p><img src="/post/24714/image-20220329182241924.png"></p><p>这是已经删除过了的截图，（原来打开会提示有多个虚拟机）原来我重复注册了设备导致了虚拟机冲突，接下来就是解决该问题，右键镜像<img src="/post/24714/image-20220329182706317.png"></p><p>删除所有，或者是释放资源然后进行删除，打开ensp重新注册设备，完美解决！！！</p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>po一些相关网页</p><p><a href="https://blog.csdn.net/doubledSS/article/details/104786939">https://blog.csdn.net/doubledSS/article/details/104786939</a></p><p><a href="https://blog.csdn.net/qq_35428201/article/details/90599186">https://blog.csdn.net/qq_35428201/article/details/90599186</a></p><h2 id="防火墙问题"><a href="#防火墙问题" class="headerlink" title="防火墙问题"></a>防火墙问题</h2><p>未允许ensp通过防火墙，在windows防火墙里允许ensp通过或关闭防火墙</p><h2 id="版本问题"><a href="#版本问题" class="headerlink" title="版本问题"></a>版本问题</h2><p>ensp每个版本对虚拟机，nacap、wireshark版本要求都不相同，注意安装对应版本</p><h2 id="设备注册问题"><a href="#设备注册问题" class="headerlink" title="设备注册问题"></a>设备注册问题</h2><p>虚拟机设备被重复注册了，或者对硬盘文件修改导致了出错，请先到virtualbox里释放并删除虚拟机资源再进行重新注册</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Soft ware" scheme="https://bugdev.tk/categories/Soft-ware/"/>
    
    
    <category term="Problem" scheme="https://bugdev.tk/tags/Problem/"/>
    
  </entry>
  
  <entry>
    <title>HCIA速通-网络工程师-6-企业网络架构1</title>
    <link href="https://bugdev.tk/post/43795/"/>
    <id>https://bugdev.tk/post/43795/</id>
    <published>2022-03-13T13:44:00.000Z</published>
    <updated>2022-03-28T12:15:46.742Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><strong>特辑专属BGM-Hacknet原声集</strong></p>    <div id="aplayer-vukMvlnY" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="8058662392" data-server="tencent" data-type="playlist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="140px" data-preload="auto" data-theme="#555"></div> <h1 id="链路聚合"><a href="#链路聚合" class="headerlink" title="链路聚合"></a>链路聚合</h1><p>链路聚合 （英语： Link Aggregation ）是一个 计算机网络 术语，指将多个物理端口汇聚在一起，形成一个逻辑端口，以实现出/入流量 吞吐量 在各成员端口的负荷分担，交换机根据用户配置的端口负荷分担策略决定 网络封包 从哪个成员端口发送到对端的交换机。. 当交换机检测到其中一个成员端口的链路发生故障时，就停止在此端口上发送封包，并根据负荷分担策略在剩下的链路中重新计算报文的发送端口，故障端口恢复后再次担任收发端口。. 链路聚合在增加链路带宽、实现链路传输弹性和工程冗余等方面是一项很重要的技术。</p><ul><li><p><strong>链路聚合一般部署在核心节点，以便提升整个网络的数据吞吐量</strong></p></li><li><p><strong>特点：提高链路带宽，增强网络可用性，支持负载分担</strong></p></li><li><p><strong>手工负载分担模式（无协议交互），所以活动接口都参与数据转发，分担负载流量</strong></p></li><li><p><strong>LACP模式支持链路备份</strong></p></li><li><p><strong>ETH-Trunk链路两端相连接口数量、速率、双工方式、流控方式必须一致</strong></p></li></ul><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="二层"><a href="#二层" class="headerlink" title="二层"></a>二层</h3><figure class="highlight gradle"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><pre><code class="hljs gradle">[Huawei]<span class="hljs-keyword">interface</span> Eth-Trunk <span class="hljs-number">1</span><br>[Huawei]<span class="hljs-keyword">interface</span> GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">1</span><br>[Huawei-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]eth-trunk <span class="hljs-number">1</span><br>[Huawei]<span class="hljs-keyword">interface</span> GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">2</span><br>[Huawei-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]eth-trunk <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p><strong>第二种方式</strong></p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[Huawei]<span class="hljs-keyword">interface</span> Eth-Trunk <span class="hljs-number">1</span><br>[Huawei-Eth-Trunk1]trunkport GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">1</span><br>[Huawei-Eth-Trunk1]trunkport GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p><strong>第三种方式</strong>（连续端口）</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[Huawei]<span class="hljs-keyword">interface</span> Eth-Trunk <span class="hljs-number">1</span><br>[Huawei-Eth-Trunk1]trunkport GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">1</span> to <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">2</span> <br></code></pre></td></tr></table></figure><h3 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">[Huawei-GigabitEthernet0/0/2]display interface Eth-Trunk 1<br>Eth-Trunk1 current state : UP<br>Line protocol current state : UP<br>Description:<br>Switch Port, PVID :    1, Hash arithmetic : According to SIP-XOR-DIP,Maximal BW:<br><span class="hljs-code"> 2G, Current BW: 2G, The Maximum Frame Length is 9216</span><br>IP Sending Frames&#x27; Format is PKTFMT_ETHNT_2, Hardware address is 4c1f-cc3b-3c34<br>Current system time: 2022-03-22 22:07:37-08:00<br><span class="hljs-code">    Input bandwidth utilization  :    0%</span><br><span class="hljs-section">    Output bandwidth utilization :    0%</span><br><span class="hljs-section">-----------------------------------------------------</span><br><span class="hljs-section">PortName                      Status      Weight</span><br><span class="hljs-section">-----------------------------------------------------</span><br>GigabitEthernet0/0/1          UP          1<br><span class="hljs-section">GigabitEthernet0/0/2          UP          1</span><br><span class="hljs-section">-----------------------------------------------------</span><br>The Number of Ports in Trunk : 2<br>The Number of UP Ports in Trunk : 2<br></code></pre></td></tr></table></figure><h3 id="三层"><a href="#三层" class="headerlink" title="三层"></a>三层</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">[Huawei]interface Eth-Trunk <span class="hljs-number">1</span><br><span class="hljs-regexp">//</span>创建trunk<br>[Huawei-Eth-Trunk1]undo portswitch<br><span class="hljs-regexp">//</span>将三层接口转换为二层<br>[Huawei-Eth-Trunk1]trunkport GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span> to <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h3 id="LACP模式"><a href="#LACP模式" class="headerlink" title="LACP模式"></a>LACP模式</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[Huawei]<span class="hljs-keyword">interface</span> Eth-Trunk <span class="hljs-number">1</span><br>[Huawei-Eth-Trunk1]mode lacp-<span class="hljs-keyword">static</span> <br>[Huawei-Eth-Trunk1]trunkport GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">1</span> to <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">3</span><br><br></code></pre></td></tr></table></figure><h4 id="设置trunk最大转发链路数量"><a href="#设置trunk最大转发链路数量" class="headerlink" title="设置trunk最大转发链路数量"></a><strong>设置trunk最大转发链路数量</strong></h4><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[Huawei-Eth-Trunk1]</span>max active-linknumber <span class="hljs-number">2</span><br><span class="hljs-comment">//设置为2条链路，unselect端口成为备份，端口down时自动开启</span><br><span class="hljs-string">[Huawei]</span>lacp priority <span class="hljs-number">100</span><br><span class="hljs-comment">//修改lacp优先级</span><br><span class="hljs-string">[Huawei-Eth-Trunk1]</span>lacp preempt enable<br><span class="hljs-comment">//开启抢占</span><br><span class="hljs-string">[Huawei-Eth-Trunk1]</span>lacp preempt delay <span class="hljs-number">10</span><br><span class="hljs-comment">//抢占时延改为10sec</span><br></code></pre></td></tr></table></figure><ul><li><strong>system porosity 和id决定active端</strong></li><li><strong>active端决定转发端口</strong></li></ul><h1 id="VLAN"><a href="#VLAN" class="headerlink" title="VLAN"></a>VLAN</h1><p>VLAN能隔离广播域</p><p>报文格式</p><p><img src="/post/43795/image-20220323001026465.png"></p><p>通过Tag区分不同VLAN</p><p>PVID表示缺省下所属VLAN（1）</p><h2 id="三种端口类型"><a href="#三种端口类型" class="headerlink" title="三种端口类型"></a>三种端口类型</h2><p><strong>Access类型：端口只能属于1个VLAN，一般用于连接计算机；</strong> </p><p><strong>Trunk类型：端口可以属于多个VLAN，可以接收和发送多个VLAN的报文，一般用于交换机之间连接；</strong> </p><p><strong>Hybrid类型：端口可以属于多个VLAN，可以接收和发送多个VLAN的报文，可以用于交换机之间连接，也可以用于连接用户的计算机。</strong></p><p><strong>Hybrid端口可以允许多个VLAN的报文发送时不打标签，而Trunk端口只允许缺省VLAN的报文发送时不打标签。</strong></p><p><strong>三种类型的端口可以共存在一台设备上，但Trunk端口和Hybrid端口之间不能直接切换，只能先设为Access端口，再设置为其他类型端口。例如：Trunk端口不能直接被设置为Hybrid端口，只能先设为Access端口，再设置为Hybrid端口。</strong></p><p><strong>Access端口只能属于1个VLAN，所以它的缺省VLAN就是它所在的VLAN，不用设置；Hybrid端口和Trunk端口可以属于多个VLAN，所以需要设置端口的缺省VLAN ID。</strong></p><h3 id="VLAN-ACCESS端口"><a href="#VLAN-ACCESS端口" class="headerlink" title="VLAN ACCESS端口"></a>VLAN ACCESS端口</h3><p>收：收到一个报文，判断是否有VLAN信息：如果没有则打上端口的PVID，并进行交换转发，如果有则直接丢弃(缺省)</p><p>发：将报文的VLAN信息剥离，直接发送出去</p><h3 id="VLAN-Trunk端口"><a href="#VLAN-Trunk端口" class="headerlink" title="VLAN Trunk端口"></a>VLAN Trunk端口</h3><p>收：收到一个报文，判断是否有VLAN信息：如果没有则打上端口的PVID，并进行交换转发，如果有判断该trunk端口是否允许该VLAN的数据进入：如果可以则转发，否则丢弃</p><p>发：比较端口的PVID和将要发送报文的VLAN信息，如果两者相等则剥离VLAN信息，再发送，如果不相等则直接发送</p><h3 id="VLAN-Hybird端口"><a href="#VLAN-Hybird端口" class="headerlink" title="VLAN Hybird端口"></a>VLAN Hybird端口</h3><p>收：收到一个报文，判断是否有VLAN信息：如果没有则打上端口的PVID，并进行交换转发，如果有则判断该hybrid端口是否允许该VLAN的数据进入：如果可以则转发，否则丢弃(此时端口上的untag配置是不用考虑的，untag配置只对发送报文时起作用)</p><p>发：1，判断该VLAN在本端口的属性(dispinterface即可看到该端口对哪些VLAN是untag，哪些VLAN是tag)</p><p>​        2，如果是untag则剥离VLAN信息，再发送，如果是tag则直接发送</p><h3 id="修改链路类型"><a href="#修改链路类型" class="headerlink" title="修改链路类型"></a>修改链路类型</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">[Huawei-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]port link-type access<span class="hljs-regexp">/trunk/</span>hybird <br></code></pre></td></tr></table></figure><h2 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h2><p><img src="/post/43795/image-20220323191617001.png"></p><p>设计vlan10 20互不相通</p><p>pc1、3为vlan10</p><p>pc2、4、server为vlan20</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-comment">//配置配置pc1、3为vlan10</span><br>[Huawei]vlan batch <span class="hljs-number">10</span> <span class="hljs-number">20</span><br>[Huawei]<span class="hljs-keyword">interface</span> Ethernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">1</span><br>[Huawei-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]port link-type access <br>[Huawei-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]port de<br>[Huawei-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]port <span class="hljs-keyword">default</span> vlan <span class="hljs-number">10</span><br><br><span class="hljs-comment">//配置pc2、4、server为vlan20</span><br>[Huawei]<span class="hljs-keyword">interface</span> Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">2</span><br>[Huawei-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">2</span>]port link-type access<br>[Huawei-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">2</span>]port <span class="hljs-keyword">default</span> vlan <span class="hljs-number">20</span><br><br><span class="hljs-comment">//配置交换机之间的TRUNK和允许通过的vlan</span><br>[Huawei]<span class="hljs-keyword">interface</span> Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">10</span><br>[Huawei-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">10</span>]port link-type trunk <br>[Huawei-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">10</span>]port trunk allow-pass vlan <span class="hljs-number">10</span> <span class="hljs-number">20</span><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs awk">pc1、<span class="hljs-number">3</span>链路配置（<span class="hljs-number">2</span>、server类似）<br><span class="hljs-regexp">//</span>配置链路类型<br>[Huawei-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]port link-type hybrid <br><span class="hljs-regexp">//</span>配置允许通过hybird时要加上的vlan tag<br>[Huawei-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]port hybrid pvid  vlan <span class="hljs-number">10</span><br>配置允许通过时要去掉的vlan tag<br>[Huawei-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">1</span>]port hybrid untagged vlan <span class="hljs-number">10</span> <span class="hljs-number">100</span><br><br><br><span class="hljs-regexp">//</span>配置交换机之间<br>[Huawei-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">10</span>]port link-type hybrid <br>[Huawei-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">10</span>]port hybrid tagged vlan <span class="hljs-number">10</span> <span class="hljs-number">20</span> <span class="hljs-number">100</span><br></code></pre></td></tr></table></figure><h3 id="基于mac地址配置"><a href="#基于mac地址配置" class="headerlink" title="基于mac地址配置"></a>基于mac地址配置</h3><p><img src="/post/43795/image-20220323161837774.png"></p><h3 id="基于网段配置"><a href="#基于网段配置" class="headerlink" title="基于网段配置"></a>基于网段配置</h3><p><img src="/post/43795/image-20220323161918481.png"></p><h3 id="基于协议配置"><a href="#基于协议配置" class="headerlink" title="基于协议配置"></a>基于协议配置</h3><p><img src="/post/43795/image-20220323161951906.png"></p><h3 id="基于策略配置"><a href="#基于策略配置" class="headerlink" title="基于策略配置"></a>基于策略配置</h3><p><img src="/post/43795/image-20220323161959280.png"></p><h3 id="voice-vlan"><a href="#voice-vlan" class="headerlink" title="voice vlan"></a>voice vlan</h3><p><img src="/post/43795/image-20220323202234900.png"></p><h1 id="garp"><a href="#garp" class="headerlink" title="garp"></a>garp</h1><p>GARP（Generic Attribute Registration Protocol）<br>-称是通用属性注册协议<br>-协议主要用于一种属性传递扩散的机制<br>-为处于同一个交换网的交换机提供了一种分发，传播，注册（vlan属性，组播地址等）的手段</p><h2 id="garp报文结构"><a href="#garp报文结构" class="headerlink" title="garp报文结构"></a>garp报文结构</h2><p><img src="/post/43795/image-20220323213808293.png"></p><h2 id="gvrp"><a href="#gvrp" class="headerlink" title="gvrp"></a>gvrp</h2><p>GVRP (Generic VLAN Redistration Protocol）<br>-是GARP的一种高级应用，用于注册和注销VLAN属性<br>-通过GVRP协议，一台设备上的VLAN信息会迅速传播到整个交换网<br>-GVRP实现动态分发，注册和传播VLAN属性，从而达到网络管理员的手工配置量及保证VLAN配置正确的目的。</p><h3 id="配置-2"><a href="#配置-2" class="headerlink" title="配置"></a>配置</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-comment">//交换机之间链路改为trunk模式</span><br><span class="hljs-selector-attr">[接口]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">link-type</span> <span class="hljs-selector-tag">trunk</span><br><span class="hljs-comment">//允许所有vlan通过</span><br><span class="hljs-selector-attr">[接口]</span><span class="hljs-selector-tag">port</span> <span class="hljs-selector-tag">trunk</span> <span class="hljs-selector-tag">allow-pass</span> <span class="hljs-selector-tag">vlan</span> <span class="hljs-keyword">all</span> <br><span class="hljs-comment">//系统下开启gvrp</span><br><span class="hljs-selector-attr">[系统]</span><span class="hljs-selector-tag">gvrp</span><br><span class="hljs-comment">//给接口开启gvrp</span><br><span class="hljs-selector-attr">[接口]</span><span class="hljs-selector-tag">gvrp</span><br></code></pre></td></tr></table></figure><h1 id="VLAN间路由"><a href="#VLAN间路由" class="headerlink" title="VLAN间路由"></a>VLAN间路由</h1><h2 id="单臂路由"><a href="#单臂路由" class="headerlink" title="单臂路由"></a><strong>单臂路由</strong></h2><p><img src="/post/43795/image-20220324001605928.png"></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>配置vlan<br>[Huawei]interface Eth0<span class="hljs-regexp">/0/</span><span class="hljs-number">11</span><br>[Huawei-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">11</span>]port link-type access <br>[Huawei-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">11</span>]port default vlan <span class="hljs-number">20</span><br><br><span class="hljs-regexp">//</span>配置交换机间trunk<br>[Huawei]interface Eth0<span class="hljs-regexp">/0/</span><span class="hljs-number">20</span><br>[Huawei-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">20</span>]port link-type trunk <br>[Huawei-Ethernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">20</span>]port trunk allow-pass vlan <span class="hljs-number">10</span> <span class="hljs-number">20</span><br><br><span class="hljs-regexp">//</span>单臂路由进入子接口配置<br>[Huawei]interface GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0.10</span><br><span class="hljs-regexp">//</span>配置vid<br>[Huawei-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0.10</span>]dot1q termination vid <span class="hljs-number">10</span><br><span class="hljs-regexp">//</span>开启arp广播<br>[Huawei-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0.10</span>]arp broadcast enable<br>[Huawei-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0.10</span>]ip address <span class="hljs-number">10.1</span>.<span class="hljs-number">1.254</span> <span class="hljs-number">24</span><br></code></pre></td></tr></table></figure><h2 id="三层交换"><a href="#三层交换" class="headerlink" title="三层交换"></a><strong>三层交换</strong></h2><p><img src="/post/43795/image-20220324001829839.png" alt="image-20220324001829839"></p><p><img src="/post/43795/image-20220324001901399.png" alt="image-20220324001901399"></p><h1 id="WLAN"><a href="#WLAN" class="headerlink" title="WLAN"></a>WLAN</h1><p>WLAN是Wireless Local Area Network的简称，指应用无线通信技术将计算机设备互联起来，构成可以互相通信和实现资源共享的网络体系。无线局域网本质的特点是不再使用通信电缆将计算机与网络连接起来，而是通过无线的方式连接，从而使网络的构建和终端的移动更加灵活。</p><h2 id="主要标准"><a href="#主要标准" class="headerlink" title="主要标准"></a>主要标准</h2><p><img src="/post/43795/image-20220328200100916.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Network" scheme="https://bugdev.tk/categories/Network/"/>
    
    
    <category term="Network" scheme="https://bugdev.tk/tags/Network/"/>
    
  </entry>
  
  <entry>
    <title>关于高级企业网络的笔记</title>
    <link href="https://bugdev.tk/post/25704/"/>
    <id>https://bugdev.tk/post/25704/</id>
    <published>2022-03-12T11:44:00.000Z</published>
    <updated>2022-03-28T12:23:23.089Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="常见的高级企业网络架构"><a href="#常见的高级企业网络架构" class="headerlink" title="常见的高级企业网络架构"></a>常见的高级企业网络架构</h1><p><img src="/post/25704/image-20220322194626616.png"></p><ul><li>核心层与汇聚层交换机链路聚合，提高容量</li><li>成对机器出现，互作备份</li><li>eSight直连核心层监控整个网络状态</li><li>DMZ同时对内部与外部提供服务</li><li>数据中心交互提供备份</li><li>边缘路由旁路接入防火墙，向外对整个网络提供防护（ddos）</li><li>接入层旁路应接入管理服务，作接入控制，作流量策略过滤</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Network" scheme="https://bugdev.tk/categories/Network/"/>
    
    
    <category term="Network" scheme="https://bugdev.tk/tags/Network/"/>
    
  </entry>
  
  <entry>
    <title>HCIA速通-网络工程师-5-传输协议（SSH部分转载）</title>
    <link href="https://bugdev.tk/post/47492/"/>
    <id>https://bugdev.tk/post/47492/</id>
    <published>2022-03-11T15:13:00.000Z</published>
    <updated>2022-04-10T16:02:55.788Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><strong>特辑专属BGM-Hacknet原声集</strong></p>    <div id="aplayer-iSDErdxt" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="8058662392" data-server="tencent" data-type="playlist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="140px" data-preload="auto" data-theme="#555"></div> <h1 id="FTP"><a href="#FTP" class="headerlink" title="FTP"></a>FTP</h1><h2 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h2><p>FTP文件传输协议（File Transfer Protocol），用于Internet上的<strong>控制文件的双向传输</strong>，是一个应用程序。<strong>工作在TCP/IP协议族的应用层，其传输层协议是TCP协议，目的在于提高文件传输的共享性和可靠性，是基于客户/服务器模式工作的。</strong></p><p>1.启动FTP<br>客户通过FTP客户端软件，发起FTP交互式命令，告诉服务器，服务器上的FTP服务会接收到这个命令，并解析发来命令，然后发出回复信息，客户端对服务器说：“我想和你聊会天，可以吗？”</p><p>2.建立控制连接<br>客户端TCP层会根据服务器的IP地址，向服务器提供FTP服务的21端口发出主动建立连接的请求，服务器接收到请求后，经过三次握手，客户端与服务器端就建立了一个TCP连接，就好比是我们在A地和B地之间传输货物，首先应该建立一条运送货物的通道。这个TCP连接称为控制连接，用户发出的FTP命令和服务器的回应都是依靠该连接来传送的，在用户退出前一直存在。</p><p>3.建立数据连接，并进行文件传输<br>到目前为止，客户端和服务器端已经建立了聊天的通道，聊天过程中，对方觉得很投机，想互赠礼物（将客户端和服务器端进行文件的传输比喻为互赠礼物）怎么办，这个时候我们就需要一条通道来进行礼物的传输（将数据连接比喻为数据连接），那么是如何赠送礼物的？<br>（1）客户端通过控制连接发送一个上传文件的命令，会自己分配一个临时的TCP端口号。<br>（2）客户端通过控制连接向服务器发送一个命令告诉服务器自己的IP地址和临时端口号，然后发送一条上传文件的命令。（就好客户端要赠送礼物给服务器时，不只发送一个送礼物的命令，在这之前还要发送一条自我介绍的命令，即IP地址和端口号，来告诉服务器和他聊天的是哪一个客户）<br>（3）服务器接收到客户端的IP地址和临时端口号后，以这个IP地址和端口号为目标，使用服务器上的20端口（数据端口），向客户端发出主动建立连接的请求。<br>（4）客户端收到请求后，通过三次握手后就与服务器之间建立了另外一条TCP连接数据连接（好比礼物传输的通道）。<br>（5）客户端在自己的文件系统中选择要上传（赠送礼物）的文件。<br>（6）客户端将文件写入到文件传输的进程中（即网络流中）。<br>（7）文件传输完成后，由服务器主动关闭该数据的连接。</p><p>4.关闭FTP<br>当用户退出FTP时，客户端发送退出命令，之后控制连接被关闭，FTP服务结束。</p><h3 id="主动模式"><a href="#主动模式" class="headerlink" title="主动模式"></a>主动模式</h3><p>FTP客户端从任意的非特殊的端口（N &gt; 1023）连入到FTP服务器的命令端口–21端口。然后客户端在N+1（N+1 &gt;= 1024）端口监听，并且通过N+1（N+1 &gt;= 1024）端口发送命令给FTP服务器。服务器会反过来连接用户本地指定的数据端口，比如20端口。</p><p>主动模式的FTP的 主要问题实际上落在客户端。FTP 的客户端并不会主动连接到服务器的数据端口，而是是告诉服务器它正在监听哪个端口，然后服务器发起连接到客户端上指定的端口。但是，<strong>这样的连接有时候会被客户端的防火墙阻止</strong>。</p><h3 id="被动模式"><a href="#被动模式" class="headerlink" title="被动模式"></a>被动模式</h3><p>为了解决服务器主动发起到客户端连接会被阻止的问题，另一种更完善的工作模式出现了，它就是 FTP 的被动模式，缩写作 PASV，它工作的前提是客户端明确告知 FTP 服务器它使用被动模式。</p><p>在被动模式的 FTP 中，客户端启动到服务器的两个连接，<strong>解决了防火墙阻止从服务器到客户端的传入数据端口连接的问题</strong>。FTP 连接建立后，客户端在本地打开两个随机的非系统端口 N 和 N + 1(N &gt; 1023)。第一个端口连接服务器上的 21 端口，但是客户端这次将会发出 PASV 命令，也就是不允许服务器连接回其数据端口。这样，服务器随后会打开一个随机的非系统端口 P (P &gt; 1023)，并将 P 发送给客户端作为 PASV 命令的响应。然后客户端启动从端口 N+1 到端口 P 的连接来传输数据。</p><h3 id="FTP传输模式"><a href="#FTP传输模式" class="headerlink" title="FTP传输模式"></a>FTP传输模式</h3><p> <img src="/post/47492/1.png"></p><h2 id="路由配置FTP"><a href="#路由配置FTP" class="headerlink" title="路由配置FTP"></a>路由配置FTP</h2><p><img src="/post/47492/image-20220321231545254.png"></p><p><strong>配置用户名密码，服务类型 ftp目录 级别</strong></p><p><img src="/post/47492/image-20220321233151618.png"></p><h3 id="FTP-Client"><a href="#FTP-Client" class="headerlink" title="FTP Client"></a>FTP Client</h3><p><img src="/post/47492/image-20220321233319182.png"></p><h1 id="Telnet"><a href="#Telnet" class="headerlink" title="Telnet"></a>Telnet</h1><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="Password认证"><a href="#Password认证" class="headerlink" title="Password认证"></a>Password认证</h3><p><img src="/post/47492/image-20220321233802137.png"></p><p><strong>CLlient</strong></p><p><img src="/post/47492/image-20220321234243833.png"></p><h3 id="AAA认证"><a href="#AAA认证" class="headerlink" title="AAA认证"></a>AAA认证</h3><figure class="highlight less"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-attr">[Huawei]</span><span class="hljs-selector-tag">user-interface</span> <span class="hljs-selector-tag">vty</span> <span class="hljs-number">0</span> <span class="hljs-number">4</span><br><span class="hljs-selector-attr">[Huawei-ui-vty0-4]</span><span class="hljs-selector-tag">authentication-mode</span> <span class="hljs-selector-tag">aaa</span><br><span class="hljs-selector-attr">[HUAWEI-ui-vty0-4]</span> <span class="hljs-selector-tag">protocol</span> <span class="hljs-selector-tag">inbound</span> <span class="hljs-selector-tag">telnet</span>  <span class="hljs-comment">//配置VTY用户界面支持的协议为Telnet</span><br></code></pre></td></tr></table></figure><p><strong>创建用户</strong></p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">[HUAWEI] aaa<br>[HUAWEI-aaa] local-<span class="hljs-keyword">user</span> <span class="hljs-title">user1</span> password cipher Huawei@<span class="hljs-number">1234</span>  //创建本地用户user1并配置密码<br>[HUAWEI-aaa] local-<span class="hljs-keyword">user</span> <span class="hljs-title">user1</span> service-<span class="hljs-keyword">type</span> telnet  //配置本地用户user1的接入类型为Telnet，该用户只能使用Telnet方式登录<br>[HUAWEI-aaa] local-<span class="hljs-keyword">user</span> <span class="hljs-title">user1</span> privilege level <span class="hljs-number">15</span>  //配置本地用户user1的用户级别为<span class="hljs-number">15</span>，该用户登录后可以执行<span class="hljs-number">0</span>~<span class="hljs-number">15</span>级的命令<br>[HUAWEI-aaa] quit<br></code></pre></td></tr></table></figure><h1 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h1><p>下文转载自：<a href="https://www.cnblogs.com/nadr/p/15129704.html">https://www.cnblogs.com/nadr/p/15129704.html</a></p><p>(1).添加Router（需要有 GigabitEthernet接口）和一个Cloud，使用eNSP模拟器中的云端口与真机中虚拟出的loopback适配器端口映射，实现真机与模拟器环境的互通，以便使用终端仿真软件来实现ssh登录。云端口配置如下:</p><p><img src="/post/47492/2476630-20210811200928875-1161305719-16478797968501.png"> <img src="/post/47492/2476630-20210811200752582-191947297-16478797968522.png"></p><p>(2).在路由器和Cloud之间添加连线，并为路由器接口配置IP地址，。测一下与真机连通性。</p><p>启动路由器并配置IP地址：</p><p><img src="/post/47492/2476630-20210811200608528-804967546-16478797968523.png"></p><p>（3）启动stelnet服务功能  # stelnet server enable</p><p><img src="/post/47492/2476630-20210811201843280-1065177071-16478797968524.png"></p><p>（4）进行虚拟终端配置界面   #user-interface vty 0 4</p><p>  配置认证方式为密码认证   #authentication-mode aaa  </p><p>指定VTY用户界面所支持的协议有三个，参数分别为ssh（只支持SSH协议）、telnet（只支持telnet协议）和all（支持所有协议，包括SSH和Telnet）    #protocol inbound ssh</p><p><img src="/post/47492/2476630-20210811202148391-878718523-16478797968535.png"></p><p>（5）进入aaa认证配置界面    #aaa</p><p>配置允许登录的用户名user，密码为密文形式的******    #local-user user  password cipher ******</p><p><img src="/post/47492/2476630-20210811202830348-1284207099-16478797968536.png"></p><p>（6）配置用户user的级别    #local-user user privilege level 15</p><p>配置用户user的服务类型为ssh  #local-user user service-type ssh</p><p>用来配置SSH用户缺省采用密码认证，华为说明手册中说该项属于缺省设置，但在实验过程中发现路由器是缺省设置的，交换机需要手动配置一下，有待进一步核实  #ssh user user authentication-type  password</p><p><img src="/post/47492/2476630-20210811203048083-845226869-16478797968537.png"></p><p>（7）生成本地RSA密钥对  # rsa local-key-pair create   #回车确认使用默认值</p><p><img src="/post/47492/2476630-20210811202726461-1315250761-16478797968548.png"></p><p>2.结果验证</p><p>  使用Xshell终端软件登录</p><p>启用终端仿真软件，新建会话，输入名称（IP地址），点击“链接”按钮，在弹出的安全提示对话框中，点击“接受并保存”：</p><p><img src="/post/47492/2476630-20210811203902868-175093019-16478797968549.png"><img src="/post/47492/2476630-20210811204045892-1884126878-164787979685410.png"></p><p> 输入用户名点击确定，继续输入密码点击确定：</p><p><img src="/post/47492/2476630-20210811204214100-895046390-164787979685511.png"></p><p><img src="/post/47492/2476630-20210811204346486-1108632714-164787979685512.png"></p><p>链接成功。</p><p> <img src="/post/47492/2476630-20210811204458820-1165789342-164787979685613.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Network" scheme="https://bugdev.tk/categories/Network/"/>
    
    
    <category term="Network" scheme="https://bugdev.tk/tags/Network/"/>
    
  </entry>
  
  <entry>
    <title>HCIA速通-网络工程师 -4-路由协议</title>
    <link href="https://bugdev.tk/post/27144/"/>
    <id>https://bugdev.tk/post/27144/</id>
    <published>2022-03-10T07:02:00.000Z</published>
    <updated>2022-03-22T09:46:34.008Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><strong>特辑专属BGM-Hacknet原声集</strong></p>    <div id="aplayer-kYUiXkBP" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="8058662392" data-server="tencent" data-type="playlist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="140px" data-preload="auto" data-theme="#555"></div> <h1 id="AS"><a href="#AS" class="headerlink" title="AS"></a>AS</h1><p><img src="/post/27144/image-20220319150804198.png"></p><p><strong>路由器-路由表</strong></p><p><strong>交换机-CAM表</strong></p><p><strong>路由选路-最长掩码匹配—》路由优先级—》开销Cost（相同时等价路由）</strong></p><h2 id="IP路由表"><a href="#IP路由表" class="headerlink" title="IP路由表"></a>IP路由表</h2><p><img src="/post/27144/image-20220319154858001.png"></p><ul><li><strong>路由表中包含了路由可达的目的网络，目的网络在路由表中不存在的数据包会被丢弃</strong></li></ul><h2 id="路由优先级"><a href="#路由优先级" class="headerlink" title="路由优先级"></a>路由优先级</h2><table><thead><tr><th>路由类型</th><th>Direct</th><th>OSPF</th><th>Static</th><th>RIP</th></tr></thead><tbody><tr><td>优先级</td><td>0</td><td>10</td><td>60</td><td>100</td></tr></tbody></table><h1 id="静态路由"><a href="#静态路由" class="headerlink" title="静态路由"></a>静态路由</h1><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p><strong>目的网段地址 掩码 出口 下一跳地址</strong></p><p><img src="/post/27144/image-20220319161508814.png"></p><figure class="highlight gradle"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-comment">//三种配置方式</span><br>[RTB]ip route-<span class="hljs-keyword">static</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">1.0</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span> <span class="hljs-number">10.0</span>.<span class="hljs-number">12.1</span><br>[RTB]ip route-<span class="hljs-keyword">static</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">1.0</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span> Serial <span class="hljs-number">1</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span><br>[RTB]ip route-<span class="hljs-keyword">static</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">1.0</span> <span class="hljs-number">24</span> Serial <span class="hljs-number">1</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h2 id="路由备份"><a href="#路由备份" class="headerlink" title="路由备份"></a>路由备份</h2><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">IP route-<span class="hljs-keyword">static</span> 网段 掩码 出口 下一跳nexthop preference 优先级数值 <br></code></pre></td></tr></table></figure><h2 id="缺省路由"><a href="#缺省路由" class="headerlink" title="缺省路由"></a>缺省路由</h2><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns">[RTB]ip route-static <span class="hljs-number">0.0.0。0</span> <span class="hljs-number">0.0.0.0</span> <span class="hljs-number">10.0.12.2</span><br>[RTB]ip route-static <span class="hljs-number">0.0.0。0</span> <span class="hljs-number">0.0.0.0</span> <span class="hljs-number">10.0.12.2</span> g <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><ul><li><strong>缺省路由时目的地址和掩码为0的特殊路由</strong></li><li><strong>如果报文目的地址无法匹配路由表任何一项，路由会按照缺省路由来转发报文</strong></li></ul><h1 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h1><p><strong>动态学习建立路由表，能够根据网络变化做出调整</strong></p><p><img src="/post/27144/image-20220320173700046.png"></p><p><strong>路由选择算法步骤</strong></p><ul><li><strong>向其他路由宣告路由信息</strong>（会在路由信息里加上通过自己路由的跳数开销）</li><li><strong>接受其它路由器的路由信息</strong></li><li><strong>根据收到的路由信息计算目的网络最优路径</strong></li><li><strong>对网络拓扑变化实时反应，生成新的路由表并把拓扑变化信息向其他路由宣告</strong></li></ul><p><strong>网络收敛完成后每个路由都会有一张完整路由表</strong></p><h2 id="RIP协议"><a href="#RIP协议" class="headerlink" title="RIP协议"></a>RIP协议</h2><p><strong>适用于小型网络</strong></p><p><img src="/post/27144/image-20220320173136839.png"></p><h3 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h3><ul><li>路由运行rip后，首先发送路由更新请求，收到请求的路由会发送自己的rip路由进行响应</li><li>稳定后，路由会周期发送路由更新信息</li><li>路由老化时间：180 sec</li><li>路由更新时间：30 sec</li><li>rip通过跳数作为度量值衡量到达目的地址距离</li><li>缺省下，直连网络跳数为0，当发送路由会把度量值加1，超过15跳不可达</li></ul><h3 id="rip版本区别"><a href="#rip版本区别" class="headerlink" title="rip版本区别"></a>rip版本区别</h3><p><img src="/post/27144/image-20220320201340433.png"></p><p><strong>通过udp端口520发送报文</strong></p><h4 id="v1版本报文格式"><a href="#v1版本报文格式" class="headerlink" title="v1版本报文格式"></a>v1版本报文格式</h4><p><img src="/post/27144/image-20220320202014740.png"></p><h4 id="v2报文格式"><a href="#v2报文格式" class="headerlink" title="v2报文格式"></a>v2报文格式</h4><p><img src="/post/27144/image-20220320202229873.png"></p><h4 id="rip环路问题"><a href="#rip环路问题" class="headerlink" title="rip环路问题"></a>rip环路问题</h4><p><img src="/post/27144/image-20220320202859823.png"></p><p>当B通往10.0.0.0的链路出现问题，而又为及时通报给A路由时，此时接收到A路由通往该地址的路由信息时会把A的地址当成通往10.0.0.0的地址，从而在A和B之间形成环路</p><h5 id="避免出现环路的机制"><a href="#避免出现环路的机制" class="headerlink" title="避免出现环路的机制"></a>避免出现环路的机制</h5><p><strong>水平分割</strong></p><p>路由从某接口学到的路由，不会从该接口再发回邻居路由</p><p><strong>毒性反转</strong></p><p>路由从某接口学到的路由，会将该路由跳数设置为16，并从该接口再发回邻居路由</p><p><strong>触发更新</strong>（路由毒化）</p><p>当路由信息发生变化时，立即向邻居设备发送触发更新报文（变成16跳）</p><h4 id="RIP定时器"><a href="#RIP定时器" class="headerlink" title="RIP定时器"></a>RIP定时器</h4><p><img src="/post/27144/image-20220320204821984.png"></p><hr><h3 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[RTA]</span>rip<br><span class="hljs-string">[RTA-rip-1]</span>version <span class="hljs-number">2</span><br><span class="hljs-string">[RTA-rip-1]</span>network <span class="hljs-number">10.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><br></code></pre></td></tr></table></figure><hr><h4 id="metricin"><a href="#metricin" class="headerlink" title="metricin"></a>metricin</h4><p><img src="/post/27144/image-20220320213326023.png"></p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[Huawei]<span class="hljs-keyword">interface</span> GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span><br>[Huawei-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]rip metricin <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h4 id="metricout"><a href="#metricout" class="headerlink" title="metricout"></a>metricout</h4><p><img src="/post/27144/image-20220320213425454.png"></p><hr><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[Huawei]<span class="hljs-keyword">interface</span> GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span><br>[Huawei-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]rip metricout <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h4 id="水平分割-amp-毒性逆转"><a href="#水平分割-amp-毒性逆转" class="headerlink" title="水平分割&amp;毒性逆转"></a>水平分割&amp;毒性逆转</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[Huawei]<span class="hljs-keyword">interface</span> GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span><br>[Huawei-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]rip split-horizon <br>[Huawei-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]rip poison-<span class="hljs-keyword">reverse</span> <br></code></pre></td></tr></table></figure><ul><li><strong>两个特性同时配置时，只有rip poison-reverse会生效</strong></li></ul><h4 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h4><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[Huawei]</span>display rip <span class="hljs-number">1</span> <span class="hljs-keyword">interface</span> <span class="hljs-symbol">GigabitEthernet</span> <span class="hljs-symbol">0</span>/<span class="hljs-symbol">0</span>/<span class="hljs-symbol">0</span> <span class="hljs-symbol">verbose</span> <br></code></pre></td></tr></table></figure><h4 id="output"><a href="#output" class="headerlink" title="output"></a>output</h4><p><img src="/post/27144/image-20220320213732214.png"></p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[Huawei]<span class="hljs-keyword">interface</span> GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span><br>[Huawei-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]undo rip output<br></code></pre></td></tr></table></figure><p><strong>即在配置接口不再发送rip报文</strong></p><hr><h4 id="input"><a href="#input" class="headerlink" title="input"></a>input</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[Huawei]<span class="hljs-keyword">interface</span> GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span><br>[Huawei-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]undo rip input<br></code></pre></td></tr></table></figure><p><strong>即在配置接口不再接收rip报文</strong></p><hr><h4 id="抑制接口"><a href="#抑制接口" class="headerlink" title="抑制接口"></a>抑制接口</h4><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[Huawei]</span>rip<br><span class="hljs-string">[Huawei-rip-1]</span>silent-<span class="hljs-keyword">interface</span> <span class="hljs-symbol">GigabitEthernet</span> <span class="hljs-symbol">0</span>/<span class="hljs-symbol">0</span>/<span class="hljs-symbol">0</span><br></code></pre></td></tr></table></figure><ul><li><strong>配置接口为抑制状态，只接收rip报文</strong></li><li><strong>优先级大于rip output和rip input</strong></li></ul><hr><h4 id="RIP路由汇总"><a href="#RIP路由汇总" class="headerlink" title="RIP路由汇总"></a>RIP路由汇总</h4><p><strong>默认时在有类网络的边界自动汇总，但可以关闭汇总。</strong></p><p><strong>undo summary关闭汇总。</strong></p><p><strong>如果接口启用水平分割、毒性发转，则不进行汇总，除非使用 “summary always”命令。</strong></p><hr><h2 id="OSPF"><a href="#OSPF" class="headerlink" title="OSPF"></a>OSPF</h2><p><img src="/post/27144/image-20220321132721427.png"></p><p><strong>特点</strong></p><ul><li>无环路–》SPF算法</li><li>收敛快</li><li>扩展性好</li><li>支持认证</li></ul><h3 id="工作原理-1"><a href="#工作原理-1" class="headerlink" title="工作原理"></a>工作原理</h3><p>OSPF组播的方式在所有开启OSPF的接口发送Hello包，用来确定是否有OSPF邻居，若发现了，则建立OSPF邻居关系，形成邻居表，之后互相发送LSA（链路状态通告）相互通告路由，形成LSDB（链路状态数据库）。再通过SPF算法，计算最佳路径（cost最小）后放入路由表。</p><h3 id="报文"><a href="#报文" class="headerlink" title="报文"></a>报文</h3><p><img src="/post/27144/image-20220321133849550.png"></p><h4 id="Hello报文信息"><a href="#Hello报文信息" class="headerlink" title="Hello报文信息"></a>Hello报文信息</h4><p><img src="/post/27144/image-20220321134745984.png"></p><ul><li>用来发现和维持OSPF邻居关系</li></ul><h3 id="邻居状态变迁"><a href="#邻居状态变迁" class="headerlink" title="邻居状态变迁"></a>邻居状态变迁</h3><p><img src="/post/27144/image-20220321134714147.png"></p><p>数据库同步过程</p><p><img src="/post/27144/image-20220321135120386.png"></p><ul><li><strong>路由使用DD报文进行主从路由的选举和数据库摘要信息交互</strong></li><li><strong>DD报文包含LSA的头部信息，用来描述LSDB的摘要信息</strong></li></ul><p>邻居关系的建立</p><p><img src="/post/27144/image-20220321135151490.png"></p><p><img src="/post/27144/image-20220321135203175.png"></p><h3 id="配置-2"><a href="#配置-2" class="headerlink" title="配置"></a>配置</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">ospf process id<span class="hljs-regexp">//</span>进程id，不指定默认为<span class="hljs-number">1</span> router id 网络地址<span class="hljs-regexp">//</span>指定的id不具有实际意义只用来区分，也可不加，不指定则自动指定一个物理接口地址<br>area 数值<span class="hljs-regexp">//</span>指定区域<br>network 直连区域网段 反掩码<br></code></pre></td></tr></table></figure><h4 id="重置router-id"><a href="#重置router-id" class="headerlink" title="重置router id"></a>重置router id</h4><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">reset ospf process （重置进程即可）<br></code></pre></td></tr></table></figure><h4 id="验证-1"><a href="#验证-1" class="headerlink" title="验证"></a>验证</h4><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">display ospf peer<br></code></pre></td></tr></table></figure><h4 id="认证"><a href="#认证" class="headerlink" title="认证"></a>认证</h4><p>ospf支持两种认证配置方式，分别为区域认证和链路认证。<br> （1）区域认证：同意区域内的认证模式和口令必须一致<br> （2）链路认证：链路认证相对于区域认证更加灵活，可针对某个单独的链路进行设置单独的认证模式和密码。</p><h5 id="接口认证"><a href="#接口认证" class="headerlink" title="接口认证"></a>接口认证</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//m</span>d5验证<br>[Huawei]interface GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span><br>[Huawei-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]ospf authentication-mode md5 <span class="hljs-number">1</span> huawei<br><span class="hljs-regexp">//</span>选项<br>  INTEGER&lt;<span class="hljs-number">1</span>-<span class="hljs-number">255</span>&gt;  Key ID<br><br><span class="hljs-regexp">//</span>简单认证<br>[Huawei]interface GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span><br>[Huawei-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]ospf authentication-mode simple <span class="hljs-number">1</span> huawei<br><span class="hljs-regexp">//</span>选项<br>  cipher            Encryption type (Cryptogram)<br>  plain             Encryption type (Plain text)<br></code></pre></td></tr></table></figure><h5 id="区域认证"><a href="#区域认证" class="headerlink" title="区域认证"></a>区域认证</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>区域明文认证<br>R1：ospf <span class="hljs-number">1</span><br>R1：area <span class="hljs-number">1</span><br>R1：authentication-mode simple huawei1<br><span class="hljs-regexp">//</span>选项<br>  cipher            Encryption type (Cryptogram)<br>  plain             Encryption type (Plain text)<br><br><span class="hljs-regexp">//</span>区域md5验证<br>R2：ospf <span class="hljs-number">1</span><br>R2：area <span class="hljs-number">0</span><br>R2：authentication-mode md5 <span class="hljs-number">1</span> huawei3<br><span class="hljs-regexp">//</span>选项<br>  INTEGER&lt;<span class="hljs-number">1</span>-<span class="hljs-number">255</span>&gt;  Key ID<br><br></code></pre></td></tr></table></figure><hr><h2 id="DHCP"><a href="#DHCP" class="headerlink" title="DHCP"></a>DHCP</h2><p><img src="/post/27144/image-20220321193204329.png"></p><h3 id="报文-1"><a href="#报文-1" class="headerlink" title="报文"></a>报文</h3><p><img src="/post/27144/image-20220321193409050.png"></p><h3 id="工作原理-2"><a href="#工作原理-2" class="headerlink" title="工作原理"></a>工作原理</h3><p><img src="/post/27144/686769-20161019110002810-907858031.png"></p><p>租约50%续租 87.5重绑定 租期24hour</p><h3 id="配置-3"><a href="#配置-3" class="headerlink" title="配置"></a>配置</h3><h4 id="接口地址池"><a href="#接口地址池" class="headerlink" title="接口地址池"></a>接口地址池</h4><p><img src="/post/27144/image-20220321210328933.png"></p><h4 id="验证地址池"><a href="#验证地址池" class="headerlink" title="验证地址池"></a>验证地址池</h4><p><img src="/post/27144/image-20220321212059880.png"></p><h4 id="全局地址池"><a href="#全局地址池" class="headerlink" title="全局地址池"></a>全局地址池</h4><p><img src="/post/27144/image-20220321212128088.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Network" scheme="https://bugdev.tk/categories/Network/"/>
    
    
    <category term="Network" scheme="https://bugdev.tk/tags/Network/"/>
    
  </entry>
  
  <entry>
    <title>HCIA速通-网络工程师 -3-生成树协议</title>
    <link href="https://bugdev.tk/post/27054/"/>
    <id>https://bugdev.tk/post/27054/</id>
    <published>2022-03-09T14:49:00.000Z</published>
    <updated>2022-04-10T15:59:54.408Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><strong>特辑专属BGM-Hacknet原声集</strong></p>    <div id="aplayer-CdNPIZUh" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="8058662392" data-server="tencent" data-type="playlist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="140px" data-preload="auto" data-theme="#555"></div> <h1 id="生成树"><a href="#生成树" class="headerlink" title="生成树"></a>生成树</h1><h2 id="STP生成树协议"><a href="#STP生成树协议" class="headerlink" title="STP生成树协议"></a>STP生成树协议</h2><p><img src="/post/27054/image-20220315225145172.png"></p><p><strong>根桥：</strong>在以太网络中，以某台交换机的某个端口为根的生成。此端口为</p><p>此外其他交换机为非根</p><ul><li><p>消除环路：通过阻断冗余链路来消除网络中可能存在的环路。</p></li><li><p>链路备份：当活动路径发生故障时， 激活备份链路， 及时恢复网络连通性。</p></li><li><p>选举根端口</p></li><li><p>阻塞非根端口</p></li><li><p><strong>非根交换机在选举端口时分别根据该端口的根路径开销、对端BID、对端PID和本端PID选择</strong></p></li><li><p>一个周期内的状态变迁时间为15秒</p></li></ul><h4 id="根桥选举过程"><a href="#根桥选举过程" class="headerlink" title="根桥选举过程"></a><strong>根桥选举过程</strong></h4><ol><li><strong>首先对比桥优先级，桥优先级最高（数值最小的）的设备会被选举为根桥。</strong></li><li><strong>如果桥优先级相同，则会比较MAC地址，MAC地址越小则越优先。</strong></li></ol><h4 id="根端口选举"><a href="#根端口选举" class="headerlink" title="根端口选举"></a><strong>根端口选举</strong></h4><ul><li><strong>非根交换机在选举根端口时依据的先后顺序为该端口的根路径开销、对端BID（Bridge ID）、对端PID（Port ID）和本端PID。</strong></li></ul><h3 id="STP端口角色"><a href="#STP端口角色" class="headerlink" title="STP端口角色"></a>STP端口角色</h3><p>STP中定义了三种端口角色：指定端口，根端口和预备端口。</p><p>指定端口（<strong>Design</strong>）：是交换机向所连网段转发配置BPDU的端口，每个网段有且只能有一个指定端口。一般情况下，根桥的每个端口总是指定端口。</p><p>根端口（<strong>Root</strong>）：是非根交换机去往根桥路径最优的端口。在一个运行STP协议的交换机上最多只有一个根端口，但根桥上没有根端口。</p><p>预备端口（<strong>Alternate</strong>）：如果一个端口既不是指定端口也不是根端口，则此端口为预备端口。预备端口将被阻塞。</p><p><strong>Tips</strong>：一台交换机有且仅有一个根端口（根桥除外），一条链路有且仅有一个指定端口。</p><h3 id="STP端口状态"><a href="#STP端口状态" class="headerlink" title="STP端口状态"></a>STP端口状态</h3><p><strong>Blocking</strong>（阻塞状态）：二层端口为非指定端口，也不会参与数据帧的转发。</p><p><strong>Listening</strong>（侦听状态）：生成树会根据交换机所接收到的BPDU而判断出了这个端口应该参与数据帧的转发。</p><p><strong>Learning</strong> (学习状态)：这个二层端口准备参与数据帧的转发，并开始填写MAC表。在默认情况下，端口会在这种状态下停留15秒钟时间。</p><p><strong>Forwarding</strong>（转发状态）：这个二层端口已经成为了活动拓扑的一个组成部分，它会转发数据帧，并同时收发BPDU。</p><p><strong>Disabled</strong>（禁用状态）：这个二层端口不会参与生成树，也不会转发数据帧。</p><p><img src="/post/27054/1.png"></p><h3 id="Bridge-Protocol-Data-Unit"><a href="#Bridge-Protocol-Data-Unit" class="headerlink" title="Bridge Protocol Data Unit"></a>Bridge Protocol Data Unit</h3><p><img src="/post/27054/image-20220317164521244.png"></p><ul><li>BPDU保护桥ID、路径开销、端口ID、计时器等参数</li><li>stp稳定状态下只由根端口发送bpdu</li><li>在初始状态下个交换机端口都发送bpdu信息以决定端口状态来选择指定端口</li></ul><p>标准生成树的bpdu参数</p><p><img src="/post/27054/image-20220317165213964.png"></p><p>message age&amp;&amp;max age:    20 sec</p><p>hello time ：2 sec</p><h3 id="STP拓扑变化处理过程"><a href="#STP拓扑变化处理过程" class="headerlink" title="STP拓扑变化处理过程"></a>STP拓扑变化处理过程</h3><p><img src="/post/27054/222651z27vmmc4g2vmiow2.png"></p><ol><li>T点接口发生变更后，下游设备会不间断地向上游设备发送TCN BPDU报文。</li><li>上游设备收到下游设备发来的TCN BPDU报文后，只有指定端口处理TCN BPDU报文。其它端口也有可能收到TCN BPDU报文，但不会处理。</li><li>上游设备会把配置BPDU报文中的Flags的TCA位设置1，然后发送给下游设备，告知下游设备停止发送TCN BPDU报文。</li><li>上游设备复制一份TCN BPDU报文，向根桥方向发送。</li><li>重复步骤1、2、3、4，直到根桥收到TCN BPDU报文。</li><li>根桥把配置BPDU报文中的Flags的TC位置1后发送，通知下游设备直接删除桥MAC地址表项。</li></ol><h3 id="STP配置"><a href="#STP配置" class="headerlink" title="STP配置"></a>STP配置</h3><figure class="highlight dos"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><pre><code class="hljs dos">[Huawei]stp <span class="hljs-built_in">mode</span> ?<br>  mstp  Multiple Spanning <span class="hljs-built_in">Tree</span> Protocol (MSTP) <span class="hljs-built_in">mode</span><br>  rstp  Rapid Spanning <span class="hljs-built_in">Tree</span> Protocol (RSTP) <span class="hljs-built_in">mode</span><br>  stp   Spanning <span class="hljs-built_in">Tree</span> Protocol (STP) <span class="hljs-built_in">mode</span><br>[Huawei]stp <span class="hljs-built_in">mode</span> stp<br></code></pre></td></tr></table></figure><h4 id="配置交换机优先级"><a href="#配置交换机优先级" class="headerlink" title="配置交换机优先级"></a>配置交换机优先级</h4><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[Huawei]</span>stp priority <span class="hljs-number">4096</span><br></code></pre></td></tr></table></figure><h4 id="配置交换机路径开销"><a href="#配置交换机路径开销" class="headerlink" title="配置交换机路径开销"></a>配置交换机路径开销</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gradle">[Huawei]stp pathcost-standard ?<br>  dot1d-<span class="hljs-number">1998</span>  IEEE <span class="hljs-number">802.1</span>D-<span class="hljs-number">1998</span><br>  dot1t       IEEE <span class="hljs-number">802.1</span>T<br>  legacy      Legacy<br>[Huawei]<span class="hljs-keyword">interface</span> GigabitEthernet <span class="hljs-number">0</span><span class="hljs-regexp">/0/</span><span class="hljs-number">0</span><br>[Huawei-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]stp cost <span class="hljs-number">2000</span><br></code></pre></td></tr></table></figure><h4 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-attr">[Huawei]</span><span class="hljs-attribute">display</span> stp<br><br></code></pre></td></tr></table></figure><hr><h2 id="RSTP快速生成树"><a href="#RSTP快速生成树" class="headerlink" title="RSTP快速生成树"></a>RSTP快速生成树</h2><p><img src="/post/27054/image-20220317184751227.png"></p><ul><li>网络拓扑快速收敛</li></ul><p><strong>RSTP相对于标准STP增加了Backup端口和边缘端口</strong></p><ul><li>Backup：作为指定端口的备份端口，提供另外一条从根桥到非根桥的备份链路</li><li>边缘端口Edge port：不接收处理BPDU、不参与RSTP运算<ul><li>边缘端口在端口UP之后立即进入转发状态；不需等待2倍的转发延时就可转发流量</li><li>P/A机制中，边缘端口不阻塞，可持续进行流量转发</li><li>边缘端口UP时，不触发TC机制</li></ul></li></ul><h3 id="RSTP端口状态"><a href="#RSTP端口状态" class="headerlink" title="RSTP端口状态"></a>RSTP端口状态</h3><p><img src="/post/27054/image-20220317190416695.png"></p><h3 id="RST-BPDU"><a href="#RST-BPDU" class="headerlink" title="RST BPDU"></a>RST BPDU</h3><p><img src="/post/27054/image-20220317190513170.png"></p><ul><li><strong>STP的配置BPDU中的Flag字段的中间6位在RSTP中的到应用</strong></li><li><strong>非根桥设备无论是否收到根桥发送的配置BPDU，都会按照Hello Timer规定的时间间隔发送配置BPDU</strong></li></ul><h3 id="收敛过程"><a href="#收敛过程" class="headerlink" title="收敛过程"></a>收敛过程</h3><p><img src="/post/27054/image-20220317190858897.png"></p><ul><li><strong>每一台交换机启动RSTP后，都认为自己是”根桥”，并且发送RST BPDU。所以端口都为指定端口，处于Discarding状态</strong></li></ul><p><img src="/post/27054/image-20220317191024443.png"></p><ul><li><strong>SWB收到了更优的RST BPDU，于是停止发送RST BPDU,并开始执行同步</strong></li></ul><p><img src="/post/27054/image-20220317191055434.png"></p><ul><li><strong>阻塞所以非边缘端口后，SWB会发送一个Agreement位置的RST BPDU</strong></li></ul><p><img src="/post/27054/image-20220317191153104.png"></p><ul><li><strong>P/A进程向下游继续传递，SWB和SWC会继续进行收敛</strong></li></ul><h3 id="RSTP拓扑变化处理"><a href="#RSTP拓扑变化处理" class="headerlink" title="RSTP拓扑变化处理"></a>RSTP拓扑变化处理</h3><p><img src="/post/27054/image-20220317191335772.png"></p><ul><li><strong>其他交换设备接收到rst bpdu后，清空所有其他端口学习到的mac地址，除了收到rst bpdu的端口</strong></li><li><strong>非根桥在3个hello时间内未收到RST BPDU即认为根桥出现故障，随即进行重新选举</strong></li></ul><h3 id="STP兼容"><a href="#STP兼容" class="headerlink" title="STP兼容"></a>STP兼容</h3><p><img src="/post/27054/image-20220317191431873.png"></p><ul><li><strong>运行rstp的交换设备在某个端口接收到运行stp的设备发出的bdpu，会把该端口转到stp模式</strong></li><li><strong>等待2个hello时间</strong></li></ul><h3 id="RSTP配置"><a href="#RSTP配置" class="headerlink" title="RSTP配置"></a>RSTP配置</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx">[Huawei]<span class="hljs-attribute">stp</span> mode rstp <br></code></pre></td></tr></table></figure><h4 id="验证-1"><a href="#验证-1" class="headerlink" title="验证"></a>验证</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx">[Huawei]<span class="hljs-attribute">display</span> stp <br></code></pre></td></tr></table></figure><h4 id="边缘端口配置"><a href="#边缘端口配置" class="headerlink" title="边缘端口配置"></a>边缘端口配置</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx">[Huawei-GigabitEthernet0/0/0]<span class="hljs-attribute">stp</span> edged-port enable<br></code></pre></td></tr></table></figure><ul><li>边缘端口可以由disabled直接转到forwarding状态，不经历时延</li></ul><p><strong>全局配置边缘端口</strong></p><p><strong>！！！</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs linux">stpedged-port default<br></code></pre></td></tr></table></figure><h4 id="根保护"><a href="#根保护" class="headerlink" title="根保护"></a>根保护</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx">[Huawei-GigabitEthernet0/0/0]<span class="hljs-attribute">stp</span> root-protection<br></code></pre></td></tr></table></figure><ul><li><strong>根保护确保了根桥的指定端口不会因为一些网络问题而改变端口角色</strong></li></ul><h4 id="BPDU保护"><a href="#BPDU保护" class="headerlink" title="BPDU保护"></a>BPDU保护</h4><p><strong>假设边缘端口意外收到BPDU，则端口变成普通端口，会参与STP计算，这时会触发TC，重新刷新mac地址表，造成网络震荡，我们就可以进行BPDU保护配置</strong></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx">[huawei]<span class="hljs-attribute">stp</span> bdpu-protection<br></code></pre></td></tr></table></figure><ul><li><strong>配置bdpu保护后，如果边缘端口收到bdpu报文，会立即关闭，并通知网管系统，被关闭的端口只能通过手动恢复</strong></li></ul><h5 id="意外shutdown的恢复"><a href="#意外shutdown的恢复" class="headerlink" title="意外shutdown的恢复"></a>意外shutdown的恢复</h5><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">error-down <span class="hljs-built_in">auto</span>-recovery cause bpdu-protection <span class="hljs-built_in">int</span>erval <span class="hljs-number">30</span>    <span class="hljs-comment">//30秒自动恢复</span><br></code></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-comment">//手动恢复</span><br><span class="hljs-keyword">interface</span> <span class="hljs-symbol">g0</span>/<span class="hljs-symbol">0</span>/<span class="hljs-symbol">0</span><br><span class="hljs-symbol">undo</span>  <span class="hljs-symbol">shutdown</span><br></code></pre></td></tr></table></figure><h4 id="环路保护"><a href="#环路保护" class="headerlink" title="环路保护"></a>环路保护</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">[Huawei-GigabitEthernet0<span class="hljs-regexp">/0/</span><span class="hljs-number">0</span>]stp loop-protection<br></code></pre></td></tr></table></figure><ul><li><strong>根端口如果长时间收不到来自上游的bdpu，则进入discarding状态，避免在网络中形成环路</strong></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Network" scheme="https://bugdev.tk/categories/Network/"/>
    
    
    <category term="Network" scheme="https://bugdev.tk/tags/Network/"/>
    
  </entry>
  
  <entry>
    <title>HCIA速通-网络工程师 -2-VRP基础</title>
    <link href="https://bugdev.tk/post/42402/"/>
    <id>https://bugdev.tk/post/42402/</id>
    <published>2022-03-08T11:45:00.000Z</published>
    <updated>2022-03-22T04:34:21.702Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><strong>特辑专属BGM-Hacknet原声集</strong></p>    <div id="aplayer-OwZWNbXU" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="8058662392" data-server="tencent" data-type="playlist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="140px" data-preload="auto" data-theme="#555"></div> <h1 id="VRP基础"><a href="#VRP基础" class="headerlink" title="VRP基础"></a>VRP基础</h1><ol><li><p><strong>system-view</strong>命令进入系统视图</p></li><li><p><strong>interface <em>interface-type interface-number</em></strong> 命令进入相应的接口视图</p></li><li><p><strong>quit</strong>命令的功能是从任何一个视图退出到上一层视图</p></li><li><p>用户可以随时键入“？ ”以获得在线帮助信息</p></li><li><p><strong>display-Display information</strong></p><p><strong>display ip int brief 查看接口ip地址</strong></p><p><strong>display int brief 查看接口的简要信息</strong></p><p><strong>display this 查看当前配置过的命令</strong></p><p><strong>display current-configuration 显示当前配置文件</strong></p><p><strong>display saved-configuration 显示保存的配置文件</strong></p><p><strong>display this 查看当前模式下的配置</strong></p><p><strong>display current-configuration 关键词（查看关键词的配置）</strong></p><p><strong>display mac-address 查看MAC表</strong></p><p><strong>display arp 查看ARP表</strong></p><p><strong>display ip routing-table 查看路由表</strong></p><p><strong>display ospf peer 查看ospf邻居关系</strong></p><p><strong>display ospf lsdb 查看链路关系数据库</strong></p><p><strong>display  int Eth-Trunk 查看链路聚合状态</strong></p><p><strong>display clock 查看系统当前时间</strong></p></li><li><p>通过命令<strong>sysname <em>host-name</em></strong>来对设备名称进行修改</p></li><li><p>设置时区的命令行为<strong>clock timezone <em>time-zone-name</em> {add|minus}</strong></p></li><li><p>配置接口 IP地址 的命令为 **ip address ip-address{masl^mask-length},**其中 ip address 是命令关键字， ip-address为希望配置的IP地址。mask表示点分十进制方式的子网掩码；mask-length表 示长度方式的子网掩码，即掩码中二进制数1的个数。</p></li><li><p>save保存</p></li><li><p>shutdown关机/在接口下也可用</p></li></ol><h1 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h1><p><img src="/post/42402/image-20220315203905983.png"></p><h1 id="文件基础"><a href="#文件基础" class="headerlink" title="文件基础"></a>文件基础</h1><ol><li>pwd 查看当前路径</li><li>dir显示目录文件</li><li>cd [dir] 进入目录</li><li>cd..返回上层</li><li>copy 复制文件</li><li>move 移动文件</li><li>rename 重命名文件</li><li>delete/unreserved 删除/永久删除文件</li><li>undelete 恢复删除文件</li><li>reset recycle-bin 彻底删除回收站文件</li><li>display current-configuration 显示当前配置文件</li><li>display saved-configuration 显示保存的配置文件</li><li>save 保存</li><li>display startup 显示启动配置参数</li><li>startup saved-configuration 修改下次启动的配置文件</li><li>fixdisk [disk:] 存储修复</li><li>format [disk:] 存储格式化</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Network" scheme="https://bugdev.tk/categories/Network/"/>
    
    
    <category term="Network" scheme="https://bugdev.tk/tags/Network/"/>
    
  </entry>
  
  <entry>
    <title>HCIA速通-网络工程师 -1-OSI模型</title>
    <link href="https://bugdev.tk/post/1132/"/>
    <id>https://bugdev.tk/post/1132/</id>
    <published>2022-03-06T02:37:00.000Z</published>
    <updated>2022-04-10T15:58:22.689Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p><strong>特辑专属BGM-Hacknet原声集</strong></p>    <div id="aplayer-dXOKzLoZ" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="8058662392" data-server="tencent" data-type="playlist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="140px" data-preload="auto" data-theme="#555"></div> <h1 id="网络结构层次-OSI七层参考模型"><a href="#网络结构层次-OSI七层参考模型" class="headerlink" title="网络结构层次 - OSI七层参考模型"></a>网络结构层次 - OSI七层参考模型</h1><p><img src="/post/1132/image-20220315114713766-16473160371261.png"></p><h2 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h2><p>​    </p><p>​                                                                                                传输bit流 提供物理连接 机械参数&amp;&amp;电气性能标准化</p><hr><h2 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h2><p>​                                                                                                    传输帧 逻辑链路 数据封装-帧头帧尾-差错控制<br>​                                                                                                    局域网中还分逻辑链路控制和介质访问控制（早期）</p><p><img src="/post/1132/image-20220315120944929-16473173864722.png"></p><p><strong>d.mac 目的mac地址</strong></p><p><strong>s.mac 源mac地址</strong></p><p><strong>fcs 帧校验</strong></p><p><strong>依靠type类型&amp;长度决定数据帧格式</strong></p><p>820.3 交换机生成树使用</p><h3 id="Ethernet-II帧格式"><a href="#Ethernet-II帧格式" class="headerlink" title="Ethernet_II帧格式"></a>Ethernet_II帧格式</h3><p><img src="/post/1132/image-20220315122108419-16473180707673-16473185137855.png"></p><p><img src="/post/1132/image-20220315122530762-16473183329474.png"></p><h3 id="IEEE802-3帧格式"><a href="#IEEE802-3帧格式" class="headerlink" title="IEEE802.3帧格式"></a>IEEE802.3帧格式</h3><p><img src="/post/1132/image-20220315122649073.png"></p><p><img src="/post/1132/image-20220315123054958-16473186563156.png"></p><p><strong>OUI 唯一识别标识符</strong></p><h3 id="数据帧的发送和接收"><a href="#数据帧的发送和接收" class="headerlink" title="数据帧的发送和接收"></a>数据帧的发送和接收</h3><p><img src="/post/1132/image-20220315123544039-16473189456308.png"></p><hr><h2 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h2><p>​                                                                                                    控制子网通信 路由选择 路由中继 链路复用 差错控制 流量控制</p><h3 id="IP协议"><a href="#IP协议" class="headerlink" title="IP协议"></a>IP协议</h3><h4 id="IP报文头部"><a href="#IP报文头部" class="headerlink" title="IP报文头部"></a>IP报文头部</h4><p><img src="/post/1132/image-20220315124352453-16473194347349.png"></p><p><strong>TTL存活时间 255</strong></p><p><strong>identification 分片控制</strong></p><p><strong>protocol 协议号</strong></p><h4 id="IP地址"><a href="#IP地址" class="headerlink" title="IP地址"></a>IP地址</h4><p><img src="/post/1132/image-20220315124958076-164731979931111.png"></p><p><img src="/post/1132/image-20220315125049099-164731985025712.png"></p><p><strong>主机位为0表示网段地址 255为广播地址</strong></p><h4 id="IP地址分类"><a href="#IP地址分类" class="headerlink" title="IP地址分类"></a>IP地址分类</h4><p><img src="/post/1132/image-20220315125430140-164732007125413.png"></p><p><img src="/post/1132/image-20220315130206021.png"></p><h4 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h4><p><strong>网络位二进制取反</strong></p><p><img src="/post/1132/image-20220315130411624-164732065373914.png"></p><h5 id="增长子网掩码（vlsm）"><a href="#增长子网掩码（vlsm）" class="headerlink" title="增长子网掩码（vlsm）"></a><strong>增长子网掩码（vlsm）</strong></h5><p><strong>借用主机位</strong></p><h3 id="ICMP协议"><a href="#ICMP协议" class="headerlink" title="ICMP协议"></a>ICMP协议</h3><p><img src="/post/1132/image-20220315133152736-16473223140681.png"></p><p><strong>icmp重定向 最优路径选择</strong></p><p><img src="/post/1132/image-20220315133734327-16473226557482.png"></p><h4 id="icmp数据报格式"><a href="#icmp数据报格式" class="headerlink" title="icmp数据报格式"></a>icmp数据报格式</h4><p><img src="/post/1132/image-20220315133900453-16473227423403.png"></p><p><strong>type icmp消息类型</strong></p><p><strong>code 同一消息中的不同类型</strong></p><p><img src="/post/1132/image-20220315134053148-16473228551074.png"></p><h4 id="ping"><a href="#ping" class="headerlink" title="ping"></a>ping</h4><p><img src="/post/1132/image-20220315135608931-16473237698006.png"></p><h4 id="tracert"><a href="#tracert" class="headerlink" title="tracert"></a>tracert</h4><p><img src="/post/1132/image-20220315135508823-16473237104215.png"></p><hr><h4 id="traceroute"><a href="#traceroute" class="headerlink" title="traceroute"></a><strong>traceroute</strong></h4><p>通过traceroute我们可以知道信息从你的计算机到互联网另一端的主机是走的什么路径。当然每次数据包由某一同样的出发点（source）到达某一同样的目的地(destination)走的路径可能会不一样，但基本上来说大部分时候所走的路由是相同的。linux系统中，我们称之为traceroute,在MS Windows中为tracert。 traceroute通过发送小的数据包到目的设备直到其返回，来测量其需要多长时间。一条路径上的每个设备traceroute要测3次。输出结果中包括每次测试的时间(ms)和设备的名称（如有的话）及其IP地址。</p><hr><h3 id="ARP协议"><a href="#ARP协议" class="headerlink" title="ARP协议"></a>ARP协议</h3><p>地址解析协议，即ARP（Address Resolution Protocol），是根据IP地址获取物理地址的一个TCP/IP协议。主机发送信息时将包含目标IP地址的ARP请求广播到局域网络上的所有主机，并接收返回消息，以此确定目标的物理地址；收到返回消息后将该IP地址和物理地址存入本机ARP缓存中并保留一定时间，下次请求时直接查询ARP缓存以节约资源。地址解析协议是建立在网络中各个主机互相信任的基础上的，局域网络上的主机可以自主发送ARP应答消息，其他主机收到应答报文时不会检测该报文的真实性就会将其记入本机ARP缓存；</p><h4 id="arp数据包格式"><a href="#arp数据包格式" class="headerlink" title="arp数据包格式"></a>arp数据包格式</h4><p><img src="/post/1132/image-20220315155644617-16473310063217.png"></p><p>不同网段则直接请求网关mac地址</p><h4 id="代理arp"><a href="#代理arp" class="headerlink" title="代理arp"></a>代理arp</h4><p>不需要设置网关，路由器代理arp请求，实际获得网关mac，提升路由冗余能力</p><p><img src="/post/1132/image-20220315162531847-16473327345461.png"></p><hr><h2 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h2><p>​                                                                                                    端到端数据传输 数据分段、传输、组装 差错控制/流量控制</p><h3 id="TCP协议"><a href="#TCP协议" class="headerlink" title="TCP协议"></a>TCP协议</h3><p><img src="/post/1132/image-20220315162935616-16473329771162.png"></p><h4 id="TCP常见端口号"><a href="#TCP常见端口号" class="headerlink" title="TCP常见端口号"></a>TCP常见端口号</h4><p><img src="/post/1132/image-20220315163031348-16473330330973.png"></p><h4 id="TCP报文头"><a href="#TCP报文头" class="headerlink" title="TCP报文头"></a>TCP报文头</h4><p><img src="/post/1132/image-20220315163225149-16473331498534.png"></p><p><strong>五元组确认地址</strong></p><p><strong>sequence number 序列号，数据报排序</strong></p><p><strong>acknowledge number 确认序列号</strong></p><p><strong>resv 保留位</strong></p><table><thead><tr><th>urg</th><th>紧急指示位</th></tr></thead><tbody><tr><td>ack</td><td>缺省位</td></tr><tr><td>psh</td><td></td></tr><tr><td>rst</td><td>重置位</td></tr><tr><td>syn</td><td>初始位</td></tr><tr><td>fin</td><td></td></tr></tbody></table><p><img src="/post/1132/image-20220315163811165.png"></p><h3 id="UDP协议"><a href="#UDP协议" class="headerlink" title="UDP协议"></a>UDP协议</h3><p><img src="/post/1132/image-20220315165832441.png"></p><h4 id="UDP报文头"><a href="#UDP报文头" class="headerlink" title="UDP报文头"></a>UDP报文头</h4><p><img src="/post/1132/image-20220315165951321.png"></p><p><strong>无重传机制</strong></p><h2 id="会话层"><a href="#会话层" class="headerlink" title="会话层"></a>会话层</h2><p>​                                                                                                    会话服务 会话管理</p><h2 id="表示层"><a href="#表示层" class="headerlink" title="表示层"></a>表示层</h2><p>​                                                                                                    数据语法转换 数据加解密 数据解压缩</p><h2 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h2><p>​                                                                                                    直接向程序服务</p><hr><h1 id="tcp-ip协议族"><a href="#tcp-ip协议族" class="headerlink" title="tcp/ip协议族"></a>tcp/ip协议族</h1><h2 id="tcp和udp区别"><a href="#tcp和udp区别" class="headerlink" title="tcp和udp区别"></a>tcp和udp区别</h2><p>tcp连接建立需要进行三次握手<br>udp不需要握手 数据包无须经过确认就可以进行下一次传输</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Network" scheme="https://bugdev.tk/categories/Network/"/>
    
    
    <category term="Network" scheme="https://bugdev.tk/tags/Network/"/>
    
  </entry>
  
  <entry>
    <title>java se-方法重载</title>
    <link href="https://bugdev.tk/post/18552/"/>
    <id>https://bugdev.tk/post/18552/</id>
    <published>2022-03-02T11:24:00.000Z</published>
    <updated>2022-04-25T11:35:42.422Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="重载"><a href="#重载" class="headerlink" title="重载"></a>重载</h1><p>同一个类中，完成一些相似的功能的方法，我们可以允许他们使用相同的名字，但是要保证它们的形参列表不同即可，如果同一个类中包含了两个或两个以上方法名相同的方法，但形参列表不同，这种情况被称为方法重载（overload）</p><figure class="highlight java"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(<span class="hljs-type">int</span> i,<span class="hljs-type">int</span> m)</span>&#123;<br>    <span class="hljs-type">int</span> a=i+m;<br>&#125; <br><br><span class="hljs-comment">//如果有一个相似功能的方法可以这样写</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(<span class="hljs-type">int</span> i,<span class="hljs-type">int</span> m,<span class="hljs-type">int</span> q)</span>&#123;<br>    <span class="hljs-type">int</span> a=i+m+q;<br>&#125; <br></code></pre></td></tr></table></figure><p>但这里注意和重写的区别</p><p>重载：同类同方法名，参数列表</p><p>重写：两个类中存在父子关系，保持方法名必须相同，参数列表不能满足子类需求的时候，进行改写，参数列表也必须相同==。当子类重写父类的某个方法之后，通过子类调用该方法，一定调用的是重写之后的方法</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="java" scheme="https://bugdev.tk/categories/java/"/>
    
    
    <category term="java se" scheme="https://bugdev.tk/tags/java-se/"/>
    
  </entry>
  
  <entry>
    <title>java-容器</title>
    <link href="https://bugdev.tk/post/36441/"/>
    <id>https://bugdev.tk/post/36441/</id>
    <published>2022-02-25T11:10:00.000Z</published>
    <updated>2022-04-25T11:21:56.208Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>前言简述一下数组，数组是一种容器，可以在其中放置一个或一组数据。从而，实现使用数组来管理一组数据。</p><p>它的优势是作为一种简单的线性序列，可以快速的访问数组元素，效率高。如果从效率和类型检查的角度讲，数组是最好的。</p><p><strong>劣势</strong></p><p>不灵活：容量事先定义好，不能随着需求的变化而扩容。</p><p>比如：我们在一个用户管理系统中，要把今天注册的所有用户取出来，那么这个用户有多少个？我们在写程序时是无法确定的。如果，你能确定那你就是神了。因此，就不能使用数组。</p><p>从而看出，数组远远不 能满足我们的需求。我们需要一种<strong>灵活的，容量可以随时扩充的容器</strong>来装载我们的对象。这就是我们今天要学习的<strong>容器类</strong>，或者叫<strong>集合框架</strong>。</p><h2 id="容器的接口层次"><a href="#容器的接口层次" class="headerlink" title="容器的接口层次"></a>容器的接口层次</h2><p><img src="/post/36441/image-20220425191232029.png"></p><p>Collection是一个接口，只是规定了一些方法，即作为一个容器就应该具有这些功能。</p><p>在Collection中并没有任何的可以存储数据的地方，因此只是作为一个规范存在。</p><ul><li>添加add</li><li>删除remove</li><li>记数size</li><li>包含contains</li><li>清空clear</li><li>是否空isEmpty</li></ul><ol><li><p>Collection作为容器中最顶层的接口，没有属性，不能存储数据，只是提供了容器最基本的功能（规范）</p></li><li><p>List作为容器的接口，没有属性，不能存储数据，只是提供了容器最基本的功能（规范），增加了一些和位置相关的操作</p><p>List容器当中存储的数据是有顺序的(按照指定的位置进行存储)，元素是可以重复的</p></li><li><p>Set作为容器的接口，没有属性，不能存储数据，只是提供了容器最基本的功能（规范）</p><p>Set容器当中的数据是没有顺序的（不会按照添加顺序进行存储，    有自己的一套存储规则）元素是不可重复的.</p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="java" scheme="https://bugdev.tk/categories/java/"/>
    
    
    <category term="java se" scheme="https://bugdev.tk/tags/java-se/"/>
    
  </entry>
  
</feed>
